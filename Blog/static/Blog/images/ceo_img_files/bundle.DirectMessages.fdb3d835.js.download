(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{"+Bsv":function(e,t,n){"use strict";var a=n("ERkP"),r=n("3XMw"),s=n.n(r),o=n("M2x3"),i=n("JGUy"),c=n("/yvb"),l=n("rHpw");const d=s.a.bb081ea1,h={viewType:"settings_button"},p=a.memo((({onPress:e,pullRight:t,to:n})=>{const r=Object(i.a)();return a.createElement(c.a,{accessibilityLabel:d,clientEventContext:h,hoverLabel:{label:d},icon:a.createElement(o.a,null),link:n,onPress:e,pullRight:t,style:u.button,type:r})})),u=l.a.create((e=>({button:{marginVertical:`calc(-${e.spaces.space12})`}})));t.a=p},"2Daw":function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var a=n("KEM+"),r=n.n(a),s=n("ERkP"),o=n("LCtV"),i=n("3XMw"),c=n.n(i),l=n("VPdC"),d=n("pKoL"),h=n("MWbm"),p=n("rFBM"),u=n("/yvb"),m=n("9Xij"),b=n("rHpw"),g=n("hOZg"),v=n("Mbn/"),f=n("Lsrn"),_=n("k/Ka");const y=(e={})=>Object(_.a)("svg",{...e,style:[f.a.root,e.style],viewBox:"0 0 24 24"},s.createElement("g",null,s.createElement("path",{d:"M19.708 22H4.292C3.028 22 2 20.972 2 19.708V7.375C2 6.11 3.028 5.083 4.292 5.083h2.146C7.633 3.17 9.722 2 12 2c2.277 0 4.367 1.17 5.562 3.083h2.146C20.972 5.083 22 6.11 22 7.375v12.333C22 20.972 20.972 22 19.708 22zM4.292 6.583c-.437 0-.792.355-.792.792v12.333c0 .437.355.792.792.792h15.416c.437 0 .792-.355.792-.792V7.375c0-.437-.355-.792-.792-.792h-2.45c-.317.05-.632-.095-.782-.382-.88-1.665-2.594-2.7-4.476-2.7-1.883 0-3.598 1.035-4.476 2.702-.16.302-.502.46-.833.38H4.293z"}),s.createElement("path",{d:"M12 8.167c-2.68 0-4.86 2.18-4.86 4.86s2.18 4.86 4.86 4.86 4.86-2.18 4.86-4.86-2.18-4.86-4.86-4.86zm2 5.583h-1.25V15c0 .414-.336.75-.75.75s-.75-.336-.75-.75v-1.25H10c-.414 0-.75-.336-.75-.75s.336-.75.75-.75h1.25V11c0-.414.336-.75.75-.75s.75.336.75.75v1.25H14c.414 0 .75.336.75.75s-.336.75-.75.75z"})));y.metadata={width:24,height:24};var E=y;const C=c.a.b87ca51a,I=c.a.eebff22c;class S extends s.Component{render(){const{borderRadius:e,maskStyle:t,mediaItem:n,onAddMediaFiles:a,onCrop:r,onRemove:o,rootStyle:i,withDragDrop:c}=this.props,l=n&&!n.uploader,d=s.createElement(s.Fragment,null,this._renderPreview(),l?null:s.createElement(s.Fragment,null,s.createElement(h.a,{style:[w.mask,t,x[e]]}),s.createElement(h.a,{style:w.mediaPicker},this._renderMediaEdit(),r?this._renderMediaCrop():null,o?this._renderMediaRemove():null)));return s.createElement(h.a,{style:[w.container,i,x[e]]},c&&a?s.createElement(p.a,{onFilesAdded:a,style:[w.dragDropContainer,x[e]]},d):d)}_renderMediaRemove(){const{onRemove:e}=this.props;return s.createElement(u.a,{accessibilityLabel:C,hoverLabel:{label:C},icon:s.createElement(g.a,null),onPress:e,style:w.rightButton,type:"invertedText"})}_renderMediaCrop(){const{onCrop:e,onRemove:t}=this.props;return s.createElement(u.a,{accessibilityLabel:I,icon:s.createElement(v.a,null),onPress:e,style:t?w.middleButton:w.rightButton,type:"invertedText"})}_renderMediaEdit(){const{acceptGifs:e,acceptVideo:t,accessibilityLabel:n,onAddMediaFiles:a,onEdit:r}=this.props,o=s.createElement(E,null);return a?s.createElement(l.a,{acceptGifs:e,acceptVideo:t,accessibilityLabel:n,icon:o,onChange:a,type:"invertedText"}):s.createElement(u.a,{accessibilityLabel:n,icon:o,onPress:r,style:w.edit,type:"invertedText"})}_renderPreview(){const{aspectRatio:e,borderRadius:t,currentContent:n,mediaItem:a}=this.props;return a?s.createElement(m.a,{ratio:e},s.createElement(d.a,{borderRadius:t,enableGif:!1,mediaItem:a,style:w.mediaPreview,withCloseButton:!1})):n}}r()(S,"defaultProps",{acceptGifs:!1,acceptVideo:!1,aspectRatio:1,borderRadius:o.a.NONE});const x=b.a.create((e=>({infinite:{borderRadius:e.borderRadii.infinite},medium:{borderRadius:e.borderRadii.small},none:{borderRadius:e.borderRadii.none}}))),w=b.a.create((e=>({mediaPreview:{height:"100%"},mediaPicker:{alignItems:"center",flexDirection:"row",height:"100%",justifyContent:"center",opacity:.75,position:"absolute",top:0,width:"100%"},rightButton:{marginLeft:e.spaces.space32},middleButton:{marginLeft:e.spaces.space32,marginRight:`-${e.spaces.space12}`},mask:{backgroundColor:e.colors.translucentBlack30,height:"100%",position:"absolute",top:0,width:"100%"},container:{justifyContent:"center",overflow:"hidden"},dragDropContainer:{borderWidth:e.borderWidths.medium,borderColor:e.colors.transparent,borderStyle:"solid"},edit:{margin:`-${e.spaces.space12}`}})))},"3GUV":function(e,t,n){"use strict";var a=n("ERkP"),r=n("rHpw"),s=n("MWbm");class o extends a.Component{shouldComponentUpdate(){return!1}render(){return a.createElement(s.a,{style:i.root})}}const i=r.a.create((e=>({root:{height:5*e.lineHeightsPx.body}})));t.a=o},"5UID":function(e,t,n){"use strict";var a=n("ERkP"),r=n("3XMw"),s=n.n(r),o=n("rHpw"),i=n("+/1j"),c=n("MWbm");const l=s.a.e5b0063d;let d=0;class h extends a.Component{constructor(){super(),this._listDomId=`accessible-list-${d}`,d+=1}render(){const{children:e,title:t}=this.props,n=l({title:t});return a.createElement(c.a,{accessibilityLabelledBy:this._listDomId,accessibilityRole:"region"},a.createElement(i.a,{accessibilityLevel:1,accessibilityRole:"heading",nativeID:this._listDomId,style:o.a.visuallyHidden},t),a.createElement(c.a,{accessibilityLabel:n},e))}}t.a=h},"A/tJ":function(e,t,n){"use strict";n.r(t),n.d(t,"DMConversationCreator",(function(){return g}));n("MvUL");var a=n("ERkP"),r=n("RqPI"),s=n("rxPX"),o=n("3nOA"),i=n("0KEI"),c=n("G6rE");const l=(e,t)=>t.match.params.screenName,d=(e,t)=>{const n=r.h(e),a=((e,t)=>{const n=l(0,t);return n?c.e.selectIdByScreenName(e,n):null})(e,t);return n&&a?Object(o.a)(n,a):null};var h=Object(s.a)().propsFromState((()=>({screenName:l,conversationId:d}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(i.d)("CREATE_CONVERSATION"),fetchOneByScreenNameWithExtraFieldsIfNeeded:c.e.createFetchOneByScreenNameWithExtraFieldsIfNeeded([c.a,c.d])}))),p=n("GOQE"),u=n("kGix"),m=n("v//M"),b=n("5FtR");const g=e=>{const{conversationId:t,createLocalApiErrorHandler:n,fetchOneByScreenNameWithExtraFieldsIfNeeded:r,history:s,screenName:o}=e;return a.useEffect((()=>{Promise.resolve().then((()=>{if(!o)throw new Error("Missing screen name");return r(o)})).catch((e=>{n(p.a)(e),s.replace("/messages")}))}),[o,r,n,s]),a.createElement(a.Fragment,null,t&&a.createElement(b.a,{to:`/messages/${t}`}),a.createElement(m.a,{fetchStatus:u.a.LOADING,render:()=>null}))},v=h(g);t.default=v},Avzu:function(e,t,n){"use strict";var a=n("ERkP"),r=n("Lsrn"),s=n("k/Ka");const o=(e={})=>Object(s.a)("svg",{...e,style:[r.a.root,e.style],viewBox:"0 0 24 24"},a.createElement("g",null,a.createElement("path",{d:"M23.25 3.25h-2.425V.825c0-.414-.336-.75-.75-.75s-.75.336-.75.75V3.25H16.9c-.414 0-.75.336-.75.75s.336.75.75.75h2.425v2.425c0 .414.336.75.75.75s.75-.336.75-.75V4.75h2.425c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm-3.175 6.876c-.414 0-.75.336-.75.75v8.078c0 .414-.337.75-.75.75H4.095c-.412 0-.75-.336-.75-.75V8.298l6.778 4.518c.368.246.79.37 1.213.37.422 0 .844-.124 1.212-.37l4.53-3.013c.336-.223.428-.676.204-1.012-.223-.332-.675-.425-1.012-.2l-4.53 3.014c-.246.162-.563.163-.808 0l-7.586-5.06V5.5c0-.414.337-.75.75-.75h9.094c.414 0 .75-.336.75-.75s-.336-.75-.75-.75H4.096c-1.24 0-2.25 1.01-2.25 2.25v13.455c0 1.24 1.01 2.25 2.25 2.25h14.48c1.24 0 2.25-1.01 2.25-2.25v-8.078c0-.415-.337-.75-.75-.75z"})));o.metadata={width:24,height:24},t.a=o},BFDA:function(e,t,n){"use strict";n.r(t);var a=n("ERkP"),r=n("rxPX"),s=n("Y6L+"),o=n("zCf4"),i=n("MMRb");const c=(e,t)=>{const n=Object(o.e)(t.location.pathname,{path:`/messages/${s.f}(/.*)?`,exact:!0,strict:!1});return null==n?void 0:n.params.conversationId},l=(e,t)=>{const n=c(0,t);return Object(i.selectInboxTypeByConversation)(e,n)};var d=Object(r.a)().propsFromState((()=>({conversationId:c,inboxType:l}))),h=n("KEM+"),p=n.n(h),u=(n("kYxP"),n("HPNB")),m=n("pxuL"),b=n("v6aA"),g=n("P1r1"),v=n("0KEI"),f=n("6xIQ"),_=n("kGix"),y=n("X/yg"),E=n("xPna"),C=n("z2Pn");const I=e=>e===E.b.primary?i.fetchTrustedInboxHistory:e===E.b.secondary?i.fetchUntrustedInboxHistory:i.fetchUntrustedLowQualityInboxHistory,S=e=>e===E.b.primary?i.updateTrustedLastSeenEventId:e===E.b.secondary?i.updateUntrustedLastSeenEventId:()=>()=>Promise.resolve();var x=({inbox:e})=>Object(r.a)().propsFromState((()=>({conversationIds:Object(f.a)((t=>i.selectConversationIdsByInbox(t,e)),(e=>e)),dmNsfwMediaFilter:g.l,fetchStatus:i.selectFetchStatus,isLoadingTop:i.selectIsLoadingTop,isDmNsfwMediaFilterEnabled:g.p,isDmsOpenForAll:g.r,hasConversations:i.selectHasConversations,untrustedUnreadCount:i.selectUntrustedUnreadCount,untrustedCursor:i.selectUntrustedCursor,untrustedConversationCount:i.selectUntrustedConversationCount,untrustedLowQualityConversationCount:i.selectUntrustedLowQualityConversationCount,untrustedLowQualityCursor:i.selectUntrustedLowQualityCursor}))).adjustStateProps((({conversationIds:e,dmNsfwMediaFilter:t,fetchStatus:n,hasConversations:a,isDmNsfwMediaFilterEnabled:r,isDmsOpenForAll:s,isLoadingTop:o,untrustedUnreadCount:i,untrustedCursor:c,untrustedConversationCount:l,untrustedLowQualityConversationCount:d,untrustedLowQualityCursor:h})=>({dmNsfwMediaFilter:t,fetchStatus:a?_.a.LOADED:n,isRefreshing:a&&o,isDmNsfwMediaFilterEnabled:r,conversationIds:e,untrustedUnreadCount:i,allowUntrustedInbox:s&&l>0,allowLowQualityUntrustedInbox:s&&d>0,isAtEndOfUntrustedInbox:c&&"AT_END"===c.status}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(v.d)("DIRECT_MESSAGES_INBOX"),clearSearchCache:i.clearSearchCache,fetchInboxHistory:I(e),fetchInbox:i.fetchInbox,fetchInboxIfNeeded:i.fetchInboxIfNeeded,fetchUpdates:i.fetchUpdatesIfNeeded,setLastViewedDmInboxPath:C.h,updateLastSeenEventId:S(e),updateDmNsfwMediaFilter:g.G}))).withAnalytics({page:"messages",section:"inbox",component:Object(y.d)(e)}),w=n("qz2E"),O=n("qS4/"),M=n("3XMw"),T=n.n(M),k=n("97Jx"),R=n.n(k);class D extends a.Component{constructor(e){super(e),this.state={isLoaded:!1}}componentDidMount(){return this._isMounted=!0,this.load()}componentDidUpdate(e){return this.props.modules===e.modules?null:this.load()}componentWillUnmount(){this._isMounted=!1}load(){this.setState({isLoaded:!1});const{modules:e}=this.props,t=Object.keys(e);return Promise.all(t.map((t=>e[t]()))).then((e=>t.reduce(((t,n,a)=>(t[n]=e[a],t)),{}))).then((e=>{if(!this._isMounted)return null;this.setState({modules:e,isLoaded:!0})}))}render(){const{isLoaded:e}=this.state,t=e?this.state.modules:{};return a.Children.only(this.props.children(t||{}))}}const N=(e,t)=>n=>a.createElement(D,{modules:t},(t=>a.createElement(e,R()({},t,n))));var A=n("M2mT"),P=n("+Bsv"),L=n("MWbm"),B=n("cHvH"),F=n("t62R"),U=n("FIs5"),j=n("rHpw");const H=T.a.e7172d70,G=T.a.bef0039f,V=T.a.a5359aac;class z extends a.Component{constructor(...e){super(...e),p()(this,"componentDidMount",(()=>{this.context.setDmDrawerSupport(!1)})),p()(this,"componentWillUnmount",(()=>{this.context.setDmDrawerSupport(!0)})),p()(this,"_renderStickyCopy",(()=>{const{conversationIds:e}=this.props;return a.createElement(B.a,null,(({windowWidth:t})=>{const n=u.a.isTwoColumnLayout(t),r=0===e.length;return n||r?null:a.createElement(L.a,{style:W.stickyCopyContainer},a.createElement(F.c,{style:W.stickyCopy},V))}))})),p()(this,"_renderSettingsAppBarButton",(()=>a.createElement(b.a.Consumer,null,(({featureSwitches:e})=>{const t=e.isTrue("responsive_web_settings_revamp_enabled")?"/settings/direct_messages":"/settings/safety";return a.createElement(P.a,{pullRight:!0,to:t})})))),p()(this,"_renderEmptyDMInbox",(()=>a.createElement(U.a,{header:G,message:V}))),p()(this,"_handleBackClick",(()=>{this.props.history.push("/messages/requests")})),p()(this,"_hasDetailOpen",(()=>{const{match:e}=this.props;return!e.isExact}))}render(){const{analytics:e,conversationIds:t,createLocalApiErrorHandler:n,fetchInbox:r,fetchInboxHistory:s,fetchInboxIfNeeded:o,fetchStatus:i,fetchUpdates:c,isRefreshing:l,updateLastSeenEventId:d}=this.props;return a.createElement(A.a,{backLocation:"/messages/requests",onBackClick:this._handleBackClick,rightControl:this._renderSettingsAppBarButton(),screenType:"secondaryRoot",title:H,withDetailOpen:this._hasDetailOpen()},a.createElement(O.a,{accessibilityTitle:H,analytics:e,conversationIds:t,createLocalApiErrorHandler:n,fetchInbox:r,fetchInboxHistory:s,fetchInboxIfNeeded:o,fetchStatus:i,fetchUpdates:c,isRefreshing:l,isTertiaryInbox:!0,renderEmptyDMInbox:this._renderEmptyDMInbox,renderStickyContent:this._renderStickyCopy,updateLastSeenEventId:d,virtualScrollerCacheKey:"dmLowQualityUntrustedInbox"}))}}p()(z,"contextType",m.a);const W=j.a.create((e=>({stickyCopyContainer:{backgroundColor:e.colors.cellBackground,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor,zIndex:1},stickyCopy:{color:e.colors.gray600,padding:e.spaces.space20}})));var q=N(x({inbox:E.b.tertiary})(z),{directMessages:w.a}),K=n("/yvb"),$=n("Avzu"),Q=n("JGUy");const X=T.a.f325afc3,Y=T.a.cdcebd22;var J=({testID:e})=>{const t=Object(Q.a)();return a.createElement(K.a,{accessibilityLabel:X,hoverLabel:{label:Y},icon:a.createElement($.a,null),link:"/messages/compose",pullRight:!0,testID:e,type:t})},Z=n("Es6L"),ee="NewDM_Button",te=n("csss"),ne=n("Znyr");const ae=T.a.a2f8105f,re=T.a.cf2d1047,se=T.a.b8aa3744,oe=T.a.j06309e1,ie=T.a.gee5150a,ce=T.a.da2f9224,le=T.a.h6beb5fa;class de extends a.Component{constructor(...e){super(...e),p()(this,"_renderSettingsAppBarButton",(e=>a.createElement(b.a.Consumer,null,(({featureSwitches:t})=>{const n=t.isTrue("responsive_web_settings_revamp_enabled")?"/messages/settings":"/settings/safety";return a.createElement(P.a,{pullRight:e,to:n})})))),p()(this,"_renderPivot",(()=>{const{allowUntrustedInbox:e}=this.props;return e?a.createElement(L.a,{style:he.requestPivotContainer},a.createElement(te.a,{label:re,link:"/messages/requests",onPress:this._handleRequestsPivotClick,renderRightContent:this._renderPivotBadge,withBottomBorder:!1})):null})),p()(this,"_renderPivotBadge",(()=>{const{untrustedUnreadCount:e}=this.props;return e>0?a.createElement(ne.a,{count:e,standalone:!0,truncatedCountFormatter:le,unreadCountLabel:ce}):null})),p()(this,"_renderEmptyDMInbox",(()=>a.createElement(U.a,{buttonLink:"/messages/compose",buttonText:ie,header:se,message:oe,onImpression:this._handleEmptyDMInboxImpression}))),p()(this,"_handleEmptyDMInboxImpression",(()=>{const{analytics:e}=this.props;e.scribe({component:"empty_message",action:"impression"})})),p()(this,"_handleRequestsPivotClick",(()=>{const{analytics:e}=this.props;e.scribe({element:"requests_pivot",action:"click"})}))}componentDidMount(){const{allowUntrustedInbox:e,analytics:t,location:n,setLastViewedDmInboxPath:a}=this.props;a(n.pathname),e&&t.scribe({element:"requests_pivot",action:"impression"}),this.context.setDmDrawerSupport(!1)}componentWillUnmount(){this.context.featureSwitches.isTrue("responsive_web_dm_server_side_search")&&this.props.clearSearchCache(),this.context.setDmDrawerSupport(!0)}render(){const e=Object(Z.a)()?a.createElement(L.a,{style:he.appBarButtons},this._renderSettingsAppBarButton(),a.createElement(J,{testID:ee})):this._renderSettingsAppBarButton(!0),{analytics:t,conversationIds:n,createLocalApiErrorHandler:r,fetchInbox:s,fetchInboxHistory:o,fetchInboxIfNeeded:i,fetchStatus:c,fetchUpdates:l,isRefreshing:d,updateLastSeenEventId:h}=this.props;return a.createElement(A.a,{rightControl:e,screenType:"root",title:ae},a.createElement(O.a,{accessibilityTitle:ae,analytics:t,conversationIds:n,createLocalApiErrorHandler:r,fetchInbox:s,fetchInboxHistory:o,fetchInboxIfNeeded:i,fetchStatus:c,fetchUpdates:l,isRefreshing:d,renderEmptyDMInbox:this._renderEmptyDMInbox,renderStickyContent:this._renderPivot,updateLastSeenEventId:h,virtualScrollerCacheKey:"dmInbox",withDmSearch:!0}))}}p()(de,"contextType",m.a),p()(de,"defaultProps",{conversationIds:[],untrustedUnreadCount:0});const he=j.a.create((e=>({appBarButtons:{flexDirection:"row",alignItems:"center"},requestPivotContainer:{backgroundColor:e.colors.cellBackground,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor,zIndex:2}})));var pe=N(x({inbox:E.b.primary})(de),{directMessages:w.a}),ue=n("5FtR"),me=n("Lz2T"),be=n("0yYu"),ge=n("cm6r");const ve=T.a.cf2d1047,fe=T.a.bef0039f,_e=T.a.eb7de4a9,ye=T.a.a0e81a2e,Ee=T.a.a5359aac,Ce=T.a.f5dc353c,Ie=T.a.fe1eaa95,Se=T.a.j24c37b2,xe=T.a.daeda053;class we extends a.Component{constructor(...e){super(...e),p()(this,"_nsfwBannerWasShown",!1),p()(this,"componentDidMount",(()=>{const{analytics:e}=this.props;this._shouldRenderTombstone()&&e.scribe({element:"low_quality_pivot",action:"impression"}),this.context.setDmDrawerSupport(!1)})),p()(this,"componentDidUpdate",(e=>{const{analytics:t}=this.props;!this._shouldRenderTombstone()||e.allowLowQualityUntrustedInbox&&e.isAtEndOfUntrustedInbox||t.scribe({element:"low_quality_pivot",action:"impression"})})),p()(this,"componentWillUnmount",(()=>{this.context.setDmDrawerSupport(!0),this._nsfwBannerWasShown&&this._hideNsfwTimelineMessage()})),p()(this,"_renderNsfwSettingBanner",(({featureSwitches:e})=>{const{dmNsfwMediaFilter:t}=this.props;return e.isTrue("dm_conversations_nsfw_media_filter_enabled")&&void 0===t?(this._nsfwBannerWasShown=!0,a.createElement(a.Fragment,null,a.createElement(me.a,{bodyText:Ie,entryId:"DM_NSFW_MESSAGE",primaryAction:{onClick:this._handleNsfwTimelineMessagePrimaryClick,text:Se},secondaryAction:{link:"/settings/direct_messages",onClick:this._handleNsfwTimelineMessageSecondaryClick,text:xe},titleText:Ce}),a.createElement(be.a,null))):null})),p()(this,"_shouldRenderTombstone",(()=>{const{allowLowQualityUntrustedInbox:e,isAtEndOfUntrustedInbox:t}=this.props;return e&&t})),p()(this,"_renderTombstone",(()=>{const{conversationIds:e}=this.props;return this._shouldRenderTombstone()?a.createElement(L.a,null,e.length>0&&a.createElement(be.a,null),a.createElement(L.a,{style:Oe.tombstoneDescription},a.createElement(F.c,{color:"gray600",size:"small"},_e)),a.createElement(ge.a,{link:"/messages/requests/additional",onPress:this._handleTombstoneClick,style:Oe.tombstoneContainer},a.createElement(F.c,{align:"center",color:"primary",size:"normal"},ye))):null})),p()(this,"_renderStickyCopy",(()=>{const{conversationIds:e}=this.props;return a.createElement(B.a,null,(({windowWidth:t})=>{const n=u.a.isTwoColumnLayout(t),r=0===e.length;return n||r?null:a.createElement(L.a,{style:Oe.stickyCopyContainer},a.createElement(F.c,{style:Oe.stickyCopy},Ee))}))})),p()(this,"_renderSettingsAppBarButton",(()=>a.createElement(b.a.Consumer,null,(({featureSwitches:e})=>{const t=e.isTrue("responsive_web_settings_revamp_enabled")?"/settings/direct_messages":"/settings/safety";return a.createElement(P.a,{pullRight:!0,to:t})})))),p()(this,"_renderEmptyDMInbox",(()=>{const e=this._renderTombstone();return a.createElement(a.Fragment,null,a.createElement(U.a,{header:e?"":fe,message:Ee,style:Oe.emptyMessage}),e)})),p()(this,"_handleNsfwTimelineMessagePrimaryClick",(()=>{const{analytics:e}=this.props;e.scribe({component:"dm_nsfw_prompt",element:"primary_action",action:"click"}),this._hideNsfwTimelineMessage()})),p()(this,"_handleNsfwTimelineMessageSecondaryClick",(()=>{const{analytics:e}=this.props;e.scribe({component:"dm_nsfw_prompt",element:"secondary_action",action:"click"})})),p()(this,"_hideNsfwTimelineMessage",(()=>{const{createLocalApiErrorHandler:e,updateDmNsfwMediaFilter:t}=this.props;t(!0).catch(e())})),p()(this,"_handleBackClick",(()=>{this.props.history.push("/messages")})),p()(this,"_handleTombstoneClick",(()=>{const{analytics:e}=this.props;e.scribe({element:"low_quality_pivot",action:"click"})})),p()(this,"_hasConversationOpen",(()=>{const{match:e}=this.props;return!e.isExact}))}render(){const{analytics:e,allowUntrustedInbox:t,conversationIds:n,createLocalApiErrorHandler:r,fetchInbox:s,fetchInboxHistory:o,fetchInboxIfNeeded:i,fetchStatus:c,fetchUpdates:l,isRefreshing:d,updateLastSeenEventId:h}=this.props;return t?a.createElement(A.a,{backLocation:"/messages",onBackClick:this._handleBackClick,rightControl:this._renderSettingsAppBarButton(),screenType:"secondaryRoot",title:ve,withDetailOpen:this._hasConversationOpen()},a.createElement(b.a.Consumer,null,this._renderNsfwSettingBanner),a.createElement(O.a,{accessibilityTitle:ve,analytics:e,conversationIds:n,createLocalApiErrorHandler:r,fetchInbox:s,fetchInboxHistory:o,fetchInboxIfNeeded:i,fetchStatus:c,fetchUpdates:l,footer:this._renderTombstone(),isRefreshing:d,isSecondaryInbox:!0,renderEmptyDMInbox:this._renderEmptyDMInbox,renderStickyContent:this._renderStickyCopy,updateLastSeenEventId:h,virtualScrollerCacheKey:"dmUntrustedInbox"})):a.createElement(ue.a,{to:"/messages"})}}p()(we,"contextType",m.a),p()(we,"defaultProps",{conversationIds:[]});const Oe=j.a.create((e=>({emptyMessage:{borderBottomStyle:"solid",borderBottomColor:e.colors.borderColor,borderBottomWidth:e.borderWidths.small,paddingVertical:e.spaces.space16},stickyCopyContainer:{backgroundColor:e.colors.cellBackground,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor,zIndex:1},stickyCopy:{color:e.colors.gray600,padding:e.spaces.space20},tombstoneContainer:{borderTopStyle:"solid",borderTopColor:e.colors.borderColor,borderTopWidth:e.borderWidths.small,borderBottomStyle:"solid",borderBottomColor:e.colors.borderColor,borderBottomWidth:e.borderWidths.small,paddingVertical:e.spaces.space12},tombstoneDescription:{paddingHorizontal:e.spaces.space16,paddingVertical:e.spaces.space16}})));var Me=N(x({inbox:E.b.secondary})(we),{directMessages:w.a});const Te=d((e=>{const{inboxType:t,conversationId:n,...r}=e,{location:s}=e;return t===E.b.tertiary||"/messages/requests/additional"===s.pathname?a.createElement(q,r):t===E.b.secondary||"/messages/requests"===s.pathname?a.createElement(Me,r):a.createElement(pe,r)}));t.default=Te},BUB3:function(e,t,n){"use strict";var a=n("ERkP"),r=n("sNn6"),s=n("rHpw"),o=n("MWbm");const i=s.a.create((e=>({activeRoot:{backgroundColor:e.colors.gray0},overlay:{...s.a.absoluteFillObject,borderRightStyle:"solid",borderRightWidth:e.borderWidths.medium,borderRightColor:e.colors.primary,zIndex:1}})));t.a=({children:e,...t})=>a.createElement(r.a,t,(t=>a.createElement(o.a,{style:[t&&i.activeRoot]},"function"==typeof e?e(t):e,t?a.createElement(o.a,{pointerEvents:"none",style:i.overlay}):null)))},CFcj:function(e,t,n){"use strict";n.r(t),n.d(t,"ConversationGroupInfoScreen",(function(){return G}));var a=n("KEM+"),r=n.n(a),s=(n("kYxP"),n("ERkP")),o=n("LCtV"),i=n("MMRb"),c=n("AspN"),l=n("RqPI"),d=n("oEGd"),h=n("0KEI"),p=n("hqKg"),u=n("p9G8"),m=n("AQOc"),b=n("/NU0"),g=n("G6rE");const v=(e,t)=>t.match.params.conversationId,f=Object(p.createSelector)(((e,t)=>i.selectConversation(e,v(0,t))),i.selectEntries,v,((e,t)=>i.selectConversationFetchStatus(e,v(0,t))),l.h,g.e.selectAll,((e,t)=>{const n=i.selectConversationAvatarMediaId(e,v(0,t)),[a]=Object(b.a)(n)?c.h(e,n):[];return a}),((e,t)=>i.selectConversationAvatarMediaIsUploading(e,v(0,t))),((e,t)=>i.selectConversationAvatarMediaUploadProgress(e,v(0,t))),((e,t,n,a,r,s,o,i,c)=>{const l=e&&e.data,d=l&&Object(m.b)(l,t,s),h=d&&Object(u.a)(d,r);if(!r)throw new Error("logged-in user not found");return{avatarMedia:o,conversation:d,conversationId:n,fetchStatus:a,isUploading:i,groupName:h,mediaUploadProgress:c,perspective:r}})),_={addAvatarMedia:i.addAvatarMedia,createLocalApiErrorHandler:Object(h.d)("CONVERSATION_GROUP_INFO_SCREEN"),fetchConversation:i.fetchConversation,fetchConversationIfNeeded:i.fetchConversationIfNeeded,removeAvatarMedia:i.removeAvatarMedia,removeMediaUpload:c.f,setConversationAvatar:i.setConversationAvatar,updateConversationName:i.updateConversationName};var y=Object(d.g)(f,_),E=n("7JQg"),C=n("I2k/"),I=n("aA19"),S=n("v//M"),x=n("jHSc"),w=n("3XMw"),O=n.n(w),M=n("mN6z"),T=n("P68U"),k=n("eyty"),R=n("MWbm"),D=n("0yYu"),N=n("mw9i"),A=n("/yvb"),P=n("JYMr"),L=n("p+r5"),B=n("rHpw");const F=O.a.abd845fd,U=O.a.d87bff5a,j=O.a.i2209530,H=O.a.cabb453d;class G extends s.Component{constructor(e,t){super(e,t),r()(this,"_renderContent",(()=>s.createElement(R.a,null,this._renderGroupAvatarPicker(),s.createElement(D.a,null),this._renderGroupNameEditor()))),r()(this,"_handleFetch",(()=>{const{createLocalApiErrorHandler:e,conversationId:t,fetchConversationIfNeeded:n}=this.props;n({conversationId:t}).catch(e(Object(C.a)(t)))})),r()(this,"_handleGroupNameUpdated",(e=>{this.setState({groupNameEdit:e.target.value})})),r()(this,"_handleSavePress",(()=>{this._savePress()})),r()(this,"_savePress",(()=>{const{avatarMedia:e,conversationId:t,createLocalApiErrorHandler:n,fetchConversation:a,groupName:r,history:s,setConversationAvatar:o,updateConversationName:i}=this.props,{groupNameEdit:c}=this.state,l=[];return e&&l.push(o(t).catch(n())),c&&r!==c&&l.push(i({conversationId:t,name:c}).catch(n({showToast:!0}))),Promise.all(l).then((()=>{a({conversationId:t}).catch(n(Object(C.a)(t))),s.goBack({backLocation:`/messages/${t}/info`,shouldReplaceOnFallback:!0})}),(()=>e&&this._clearAvatarMedia(e.id)))})),r()(this,"_handleAvatarMediaChange",(([e])=>{const{addAvatarMedia:t,avatarMedia:n,conversationId:a}=this.props;n&&this._clearAvatarMedia(n.id),t(a,e)})),r()(this,"_handleMediaFailure",(e=>{this._clearAvatarMedia(e)})),this.state={groupNameEdit:e.groupName}}static getDerivedStateFromProps(e,t){const{groupName:n}=e;return"string"==typeof n&&null===t.groupNameEdit?{groupNameEdit:n}:null}componentDidMount(){this._handleFetch()}componentWillUnmount(){const{avatarMedia:e}=this.props;e&&this._clearAvatarMedia(e.id)}shouldComponentUpdate(e,t){return!Object(M.a)(e,this.props)||!Object(M.a)(t,this.state)}render(){const{fetchStatus:e,conversationId:t,history:n}=this.props;return s.createElement(x.b,{backLocation:`/messages/${t}/info`,history:n,rightControl:this._renderRightControl(),title:F},s.createElement(N.a,{style:V.root},s.createElement(S.a,{accessibilityLabel:U,fetchStatus:e,onRequestRetry:this._handleFetch,render:this._renderContent})))}_renderRightControl(){const{avatarMedia:e,groupName:t,isUploading:n}=this.props,{groupNameEdit:a}=this.state,r=n||!(a&&a!==t||e);return s.createElement(A.a,{children:j,disabled:r,onPress:this._handleSavePress,size:"normalCompact",type:"primary"})}_renderGroupAvatarPicker(){const{avatarMedia:e,conversation:t,mediaUploadProgress:n,perspective:a}=this.props,r=s.createElement(I.a,{conversation:t,perspective:a});return s.createElement(R.a,null,s.createElement(P.a,{progress:n}),s.createElement(R.a,{style:V.avatarContainerRoot},s.createElement(T.a,{borderRadius:o.a.INFINITE,currentContent:r,location:k.d.Avatar,mediaItem:e||void 0,onChange:this._handleAvatarMediaChange,onFailure:this._handleMediaFailure,rootStyle:V.avatarContainer})))}_renderGroupNameEditor(){return s.createElement(L.a,{label:H,maxLength:50,name:"groupNameEdit",onChange:this._handleGroupNameUpdated,style:V.groupNameEditor,value:this.state.groupNameEdit||""})}_clearAvatarMedia(e){const{avatarMedia:t,conversationId:n,removeAvatarMedia:a,removeMediaUpload:r}=this.props;t&&t.uploading||r(e),a(n,e)}}const V=B.a.create((e=>({root:{backgroundColor:e.colors.gray0},avatarContainerRoot:{alignItems:"center",backgroundColor:e.colors.cellBackground,paddingVertical:e.spaces.space20},groupNameEditor:{backgroundColor:e.colors.cellBackground},avatarContainer:{height:`calc(5 * ${e.spaces.space20})`,width:`calc(5 * ${e.spaces.space20})`}})));t.default=Object(E.c)({page:"messages",section:"group_settings"})(y(G))},EPsT:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("KEM+"),r=n.n(a),s=n("ERkP"),o=n("jtO7"),i=n("eb3s");class c extends s.Component{constructor(e){super(e),r()(this,"_handleClick",(e=>{this.setState({showConfirmation:!0})})),r()(this,"_handleCancel",(()=>{this.setState({showConfirmation:!1})})),r()(this,"_handleConfirm",(()=>{this.setState({showConfirmation:!1}),this.props.onConfirmationSheetConfirm()})),this.state={showConfirmation:!1}}render(){const{align:e,color:t,confirmationSheetConfirmButtonLabel:n,confirmationSheetHeadline:a,confirmationSheetText:r,label:c,confirmationSheetConfirmButtonType:l,withBottomBorder:d}=this.props;return s.createElement(s.Fragment,null,s.createElement(o.a,{align:e,color:t,label:c,onPress:this._handleClick,withBottomBorder:d}),this.state.showConfirmation?s.createElement(i.a,{confirmButtonLabel:n,confirmButtonType:l,headline:a,onCancel:this._handleCancel,onConfirm:this._handleConfirm,text:r}):null)}}r()(c,"defaultProps",{color:"red500",align:"center"})},M2mT:function(e,t,n){"use strict";var a=n("KEM+"),r=n.n(a),s=n("+/5o"),o=n("ERkP"),i=n("HPNB"),c=n("VAZu"),l=n("wiP2"),d=n("Es6L"),h=n("rHpw");var p=h.a.create((e=>({fill:{flex:1,alignSelf:"stretch"},viewportView:{...h.a.absoluteFillObject,overflowY:"auto"},appBarContainer:{backfaceVisibility:"hidden",position:"sticky",top:0,zIndex:1}}))),u=n("MWbm"),m=n("yw4N"),b=n("TnY3"),g=n("cHvH"),v=n("3xLC");class f extends o.Component{render(){return o.createElement(g.a,null,(({windowWidth:e})=>i.a.isTwoColumnLayout(e)?this._renderForTwoColumnLayout():this._renderForOneColumnLayout()))}_renderForOneColumnLayout(){const{children:e,leftControl:t,screenType:n,showSubtitleOnWideDetail:a,withBottomBorder:r,withDetailOpen:s,...i}=this.props;return o.createElement(o.Fragment,null,Object(d.a)()?this._renderInlineNav({isTwoColumnLayout:!1}):o.createElement(l.a.Configure,i),e)}_renderForTwoColumnLayout(){return o.createElement(o.Fragment,null,this._renderInlineNav({isTwoColumnLayout:!0}),this._renderChildren())}_renderInlineNav({isTwoColumnLayout:e}){const{SideNavButton:t,TeamsSwitcher:n,TabBar:a,backLocation:r,documentTitle:i,headerless:d,history:h,leftControl:m,middleControl:b,onBackClick:g,rightControl:v,screenType:f,searchBoxOptions:_,secondaryBar:y,showSubtitleOnWideDetail:E,subtitle:C,title:I,titleIconCell:S,titleIconCellSize:x,withBottomBorder:w,withDetailOpen:O,withSearchBox:M,withTweetButton:T}=this.props,k="root"===f,R="secondaryRoot"===f,D="primaryDetail"===f,N=k||D&&e,A=k?s.j:D?s.f:void 0,P=o.createElement(u.a,{style:p.appBarContainer},o.createElement(c.a,{backLocation:r,fixed:!1,hideBackButton:N,history:h,leftControl:m,middleControl:b,onBackClick:g,rightControl:v,subtitle:D&&E?C:void 0,title:I,titleDomId:A,titleIconCell:S,titleIconCellSize:x,withBottomBorder:Boolean(!y||w)})),L=k||R&&O?null:o.createElement(l.a.Configure,{SideNavButton:t,TabBar:a,TeamsSwitcher:n,backLocation:r,documentTitle:i,headerless:d,middleControl:b,onBackClick:g,rightControl:v,searchBoxOptions:_,subtitle:C,title:I,withSearchBox:M,withTweetButton:T});return o.createElement(o.Fragment,null,L,P,y)}_renderChildren(){const{children:e}=this.props;return this.context.rootDetailPerColumnScroll?o.createElement(u.a,{style:p.fill},o.createElement(m.a,{style:p.viewportView},e)):e}}r()(f,"contextType",v.a),r()(f,"defaultProps",{screenType:"secondaryDetail",showSubtitleOnWideDetail:!0});t.a=Object(b.a)(f)},"Mbn/":function(e,t,n){"use strict";var a=n("ERkP"),r=n("Lsrn"),s=n("k/Ka");const o=(e={})=>Object(s.a)("svg",{...e,style:[r.a.root,e.style],viewBox:"0 0 24 24"},a.createElement("g",null,a.createElement("path",{d:"M3.5 5.25H2c-.414 0-.75.336-.75.75s.336.75.75.75h1.5c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm18.5 12H7.5c-.414 0-.75-.337-.75-.75V2c0-.414-.336-.75-.75-.75s-.75.336-.75.75v14.5c0 1.24 1.01 2.25 2.25 2.25H22c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm-4 2.5c-.414 0-.75.336-.75.75V22c0 .414.336.75.75.75s.75-.336.75-.75v-1.5c0-.414-.336-.75-.75-.75z"}),a.createElement("path",{d:"M8.5 6.75h8c.414 0 .75.337.75.75v8c0 .414.336.75.75.75s.75-.336.75-.75v-8c0-1.24-1.01-2.25-2.25-2.25h-8c-.414 0-.75.336-.75.75s.336.75.75.75z"})));o.metadata={width:24,height:24},t.a=o},Oib4:function(e,t,n){"use strict";var a=n("ERkP"),r=n("Lsrn"),s=n("k/Ka");const o=(e={})=>Object(s.a)("svg",{...e,style:[r.a.root,e.style],viewBox:"0 0 24 24"},a.createElement("g",null,a.createElement("path",{d:"M12 1.25C6.072 1.25 1.25 6.072 1.25 12S6.072 22.75 12 22.75 22.75 17.928 22.75 12 17.928 1.25 12 1.25zm.025 16.468c-.708 0-1.28-.574-1.28-1.28 0-.71.572-1.282 1.28-1.282.708 0 1.28.573 1.28 1.28.002.708-.57 1.282-1.28 1.282zM14.47 7.636l-1.815 6.098c-.063.212-.258.357-.48.357h-.298c-.222 0-.416-.145-.48-.356L9.583 7.636c-.045-.152-.016-.316.08-.442.093-.127.24-.2.4-.2h3.927c.157 0 .306.073.4.2.094.126.124.29.08.442z"})));o.metadata={width:24,height:24},t.a=o},P68U:function(e,t,n){"use strict";var a=n("KEM+"),r=n.n(a),s=(n("kYxP"),n("ERkP")),o=n("rxPX"),i=n("AspN"),c=Object(o.a)().propsFromActions((()=>({addMedia:i.b,processMultipleMedia:i.d}))),l=n("2Daw"),d=n("VPdC");class h extends s.Component{constructor(...e){super(...e),r()(this,"_handleAddMediaFiles",(e=>{const{addMedia:t,location:n,onChange:a,onFailure:r,processMultipleMedia:s}=this.props,o=this._getAcceptedFileInputs(),i=Array.from(e).find((e=>o.includes(e.type)));i&&t([i],{location:n}).then((e=>{a&&a(e.map((e=>e.id))),s(e,{onFailure:r})}))})),r()(this,"_getAcceptedFileInputs",(()=>{const{acceptGifs:e,acceptVideo:t}=this.props;return Object(d.b)({acceptGifs:e,acceptVideo:t})}))}render(){const{accessibilityLabel:e,acceptGifs:t,acceptVideo:n,aspectRatio:a,borderRadius:r,currentContent:o,maskStyle:i,mediaItem:c,onCrop:d,onRemove:h,rootStyle:p}=this.props;return s.createElement(l.a,{acceptGifs:t,acceptVideo:n,accessibilityLabel:e,aspectRatio:a,borderRadius:r,currentContent:o,maskStyle:i,mediaItem:c,onAddMediaFiles:this._handleAddMediaFiles,onCrop:d,onRemove:h,rootStyle:p,withDragDrop:!0})}}r()(h,"defaultProps",{acceptGifs:!1,acceptVideo:!1});const p=c(h);t.a=p},TEoO:function(e,t,n){"use strict";var a=n("ERkP"),r=n("5UID"),s=n("3GUV"),o=n("iBK2");const i=a.createElement(s.a,null),c=({accessibilityTitle:e,...t})=>{const n=a.createElement(o.b,t);return e?a.createElement(r.a,{title:e},n):n};c.defaultProps={footer:i},t.a=c},XG7v:function(e,t,n){"use strict";n.r(t),n.d(t,"DMComposeScreen",(function(){return ne}));var a=n("KEM+"),r=n.n(a),s=(n("MvUL"),n("ERkP")),o=n("7JQg"),i=n("s14A"),c=n("uB9N"),l=n("3nOA"),d=n("jHSc"),h=n("wO1l"),p=n("p9G8"),u=n("AQOc"),m=n("3XMw"),b=n.n(m),g="nextButton",v=n("aITJ"),f=n("2dXj"),_=n("MWbm"),y=n("/yvb"),E=n("I7xG"),C=n("w9LO"),I=n("7N4s"),S=n("rHpw"),x=n("zh9S"),w=n("MMRb"),O=n("VnFT"),M=n("1YZw"),T=n("oEGd"),k=n("0KEI"),R=n("hqKg"),D=n("tn7R"),N=n("Hw0q"),A=n("RqPI"),P=n("X/yg"),L=n("G6rE");const B="text",F=Object(N.b)(B),U=Object(N.b)("recipient_id"),j=Object(R.createSelector)(w.selectConversations,(e=>Object(D.a)(e).filter((e=>!e.isDeleted&&e.data)).map((e=>e.data)))),H=Object(R.createSelector)(j,F,A.h,P.j,L.e.selectAll,U,((e,t,n,a,r,s)=>{if(!n)throw new Error("logged-in user not found");return{conversations:e,initialMessage:t,perspective:n,recipientId:s,tweetAttachment:a,users:r}})),G={addToast:M.b,createLocalApiErrorHandler:Object(k.d)("DIRECT_MESSAGES_COMPOSE"),fetchConversationFromParticipants:w.fetchConversationFromParticipants,fetchInboxIfNeeded:w.fetchInboxIfNeeded,popOutConversation:w.popOutConversation,scribeAction:x.c,sendMessage:O.m};var V=Object(T.g)(H,G),z=n("883S"),W=n("GZwR");const q={page:"messages",section:"compose",component:"dm"},K=b.a.de4669e2,$=b.a.cdcebd22,Q=b.a.j9e025aa,X=b.a.c64c1883,Y=b.a.f277e949,J=b.a.a2ccb2e7,Z=b.a.e3275464,ee=b.a.c1df579e,te=b.a.e1bde73e;class ne extends s.Component{constructor(e,t){super(e,t),r()(this,"_composer",s.createRef()),r()(this,"_setDisableFocusingPreviousActiveElement",(({disableFocusingPreviousActiveElement:e})=>{this._disableFocusingPreviousActiveElement=e})),r()(this,"_renderAppBarRightControl",(()=>{const{tweetAttachment:e}=this.props,t=e?Z:ee;return s.createElement(_.a,{style:re.rightColumn},s.createElement(y.a,{disabled:0===this.state.participants.length,onPress:this._handleConversationRouting,size:"normalCompact",style:re.button,testID:g,type:"primary"},t))})),r()(this,"_getItemIsDisabled",(e=>{const{isGroupSelected:t,participants:n}=this.state,{data:a,type:r}=e;return(!t||n[0].id!==e.id)&&(!!(t||r===W.b.DMConversation&&n.length>0)||r===W.b.User&&!(a.can_dm||a.is_dm_able))})),r()(this,"_getItemDisabledMessage",(e=>te({screenName:e.data.screen_name}))),r()(this,"_getInjections",Object(E.a)(this,(e=>e.conversations),(e=>e.perspective),((e,t)=>t.query),((e,t,n)=>Object(h.a)(n,e.map((e=>Object(u.b)(e,void 0,this.props.users))),t).slice(0,12)))),r()(this,"_handleQueryChange",(e=>{this.setState({query:e})})),r()(this,"_handleSuggestionSelected",(e=>{const{perspective:t}=this.props,{isGroupSelected:n,participants:a}=this.state;if(n)e.id===a[0].id&&this._handleRemoveParticipant(e);else if(e.type===W.b.DMConversation)if(this._isShareViaDM())this._createConversationObjectForSelectionPill(e);else{const n=ae(e,t);this._goToConversation(n)}else this._handleParticipantToggle(e)})),r()(this,"_createConversationObjectForSelectionPill",(e=>{const{conversations:t,perspective:n,users:a}=this.props,r=t.find((t=>e.id===t.conversation_id));if(r){const t=Object(u.b)(r,void 0,a),s=Object(p.a)(t,n);e.data={...t,conversationId:e.data.conversationId,name:s||""},this.setState({isGroupSelected:!0,participants:[e]})}})),r()(this,"_handleParticipantToggle",(e=>{const t=this.state.participants;if(t.find((({id:t})=>t===e.id)))this._handleRemoveParticipant(e);else{const n=t.concat(e);this.setState({participants:n})}})),r()(this,"_handleRemoveParticipant",(e=>{const{type:t}=e,n=this.state.participants.filter((t=>t.id!==e.id));t===W.b.DMConversation&&this.setState({isGroupSelected:!1}),this.setState({participants:n})})),r()(this,"_handleConversationRouting",(()=>{const{tweetAttachment:e}=this.props;e?this._handleShareTweet():this._handleCreateConversation()})),r()(this,"_getExistingGroupConversationFromCache",(e=>{const{conversations:t}=this.props;return t.find((t=>{const n=t.participants.length-1;return!t.name&&n===e.length&&e.every((e=>Boolean(t.participants.find((t=>e.id===t.user_id)))))}))})),r()(this,"_getExistingGroupConversationFromApi",(e=>{const t=e.map((e=>e.id)).join(",");return this.props.fetchConversationFromParticipants(t)})),r()(this,"_getExistingGroupConversation",(e=>{if(e.length<=1)return Promise.resolve();const t=this._getExistingGroupConversationFromCache(e);return t?Promise.resolve(t):this._getExistingGroupConversationFromApi(e)})),r()(this,"_handleCreateConversation",(()=>{const{history:e,initialMessage:t,perspective:n,tweetAttachment:a}=this.props,{participants:r}=this.state;if(1===r.length){const e=ae(r[0],n);this._goToConversation(e)}else{const n=this._getExistingGroupConversation(r);this._disableFocusingPreviousActiveElement&&this._disableFocusingPreviousActiveElement(),n.then((e=>{if(!e)throw new Error("No conversation found");this._goToConversation(e.conversation_id)})).catch((()=>{e.replace({pathname:"/messages/group",query:{[B]:t},state:{participants:r,tweetAttachment:a,isNewGroupConversation:!0}})})),this._disableFocusingPreviousActiveElement&&this._disableFocusingPreviousActiveElement()}})),r()(this,"_handleShareTweet",((e,t)=>{const{createLocalApiErrorHandler:n,tweetAttachment:a,perspective:r}=this.props,{participants:s}=this.state,o=1===s.length;let i=s;o&&(i=s[0]);const c={senderId:r,tweetAttachment:a,text:t},l=ae(i,r);if(l)return this._sendMessage(l,s,c);return this._getExistingGroupConversation(s).catch(n(z.a)).then((e=>{const t=e?e.conversation_id:null;return this._sendMessage(t,s,c)}))})),r()(this,"_sendMessage",((e,t,n)=>{const{createLocalApiErrorHandler:a,history:r,sendMessage:s}=this.props,o={conversationId:void 0,recipients:void 0,...n};if(!e&&Array.isArray(t)){const e=t.map((e=>{if(e.type===W.b.User)return e.data.id_str})).filter(Boolean);o.recipients=e}else o.conversationId=e;const i=a(z.b);return this.setState({isSending:!0}),s(o).then((e=>{this._displayDMMessageSentSuccessToast(e),this.setState({isSending:!1}),r.goBack()}),(e=>{this.setState({isSending:!1}),i(e)}))})),r()(this,"_goToConversation",(e=>{const{history:t,popOutConversation:n,initialMessage:a,tweetAttachment:r}=this.props;var s,o;(this._disableFocusingPreviousActiveElement&&this._disableFocusingPreviousActiveElement(),e)&&("drawer"===(null==(s=t.location)||null==(o=s.state)?void 0:o.source)?(n(e),t.goBack()):t.replace({pathname:`/messages/${e}`,query:{[B]:a},state:{tweetAttachment:r}}))})),r()(this,"_displayDMMessageSentSuccessToast",(e=>{const{addToast:t,scribeAction:n}=this.props;this._isShareViaDM()&&n({...q,action:"send_tweet_dm"}),t({text:J,action:{link:`/messages/${e}`,label:Y}})})),this.state={isGroupSelected:!1,participants:[],query:"",isSending:!1}}UNSAFE_componentWillMount(){const{createLocalApiErrorHandler:e,history:t,initialMessage:n,location:{query:a},perspective:r,recipientId:s}=this.props;if(s){const e=Object(l.a)(s,r);t.replace({pathname:`/messages/${e}`,query:{...a,[B]:n}})}else this.props.fetchInboxIfNeeded().catch(e())}componentDidUpdate(e,t){const{participants:n}=this.state;this._isShareViaDM()&&t.participants.length<n.length&&this._composer.current&&this._composer.current.focus()}render(){const{history:e,initialMessage:t,recipientId:n,scribeNamespace:a,tweetAttachment:r}=this.props,{isModal:o}=this.context,{isSending:l,participants:h}=this.state,p=this._isShareViaDM();if(n)return null;const u=r?Q:$;return s.createElement(d.b,{backButtonType:"close",backLocation:"/messages",containerStyle:re.fill,documentTitle:X,history:e,rightControl:p?void 0:this._renderAppBarRightControl(),title:u,withBottomBorder:!1},s.createElement(C.a.Context.Consumer,null,this._setDisableFocusingPreviousActiveElement),s.createElement(i.a,{style:re.fill},s.createElement(f.d,{getItemDisabledMessage:this._getItemDisabledMessage,getItemIsDisabled:this._getItemIsDisabled,injections:this._getInjections(),onQueryChange:this._handleQueryChange,onRemove:this._handleRemoveParticipant,onSelect:this._handleSuggestionSelected,selectedUsers:h,shouldAutoFocus:!p||!v.b.isIOS(),source:W.d.ComposeMessage,withCompactPills:!0}),p&&!o?s.createElement(_.a,{style:re.placeholder}):null,p?s.createElement(c.a,{canSendEmptyMessage:!!r,conversationId:"DMComposeScreen",disabled:0===h.length||l,history:e,isSending:l,isShareViaDM:!!p,isUploading:!1,mediaUploadProgress:0,onSend:this._handleShareTweet,placeholderText:K,prefillText:t,ref:this._composer,scribeNamespace:a,style:[re.shadow,!o&&re.fixToBottom],withEmojiPicker:!1,withGifPicker:!1,withMediaPicker:!1}):null))}_isShareViaDM(){const{initialMessage:e,tweetAttachment:t}=this.props;return t||!!e}}r()(ne,"contextType",I.a);const ae=(e,t)=>Array.isArray(e)||e.type!==W.b.DMConversation?Array.isArray(e)||e.type!==W.b.User?null:Object(l.a)(e.data.id_str,t):e.data.conversationId,re=S.a.create((e=>({fill:{flex:1},button:{marginLeft:e.spaces.space12},rightColumn:{alignItems:"center",flexDirection:"row",flexGrow:1,justifyContent:"flex-end"},shadow:{boxShadow:"0 -1px 3px rgba(0,0,0,0.12)"},placeholder:{height:46},fixToBottom:{position:"fixed",backfaceVisibility:"hidden",bottom:0,left:0,right:0,paddingBottom:S.a.iPhoneOffsetBottom}})));t.default=Object(o.c)(q)(V(ne))},XoqV:function(e,t,n){"use strict";n.r(t),n.d(t,"DMParticipantsScreen",(function(){return O}));var a=n("KEM+"),r=n.n(a),s=(n("kYxP"),n("ERkP")),o=n("MMRb"),i=n("0KEI"),c=n("hqKg"),l=n("RqPI"),d=n("oEGd");const h=(e,t)=>t.match.params.conversationId,p=Object(c.createSelector)(h,((e,t)=>o.selectConversationFetchStatus(e,h(0,t))),o.selectConversations,l.h,((e,t,n,a)=>{if(!a)throw new Error("logged-in user not found");const r=n[e];return{conversation:r&&r.data,conversationId:e,fetchStatus:t,perspective:a}})),u={createLocalApiErrorHandler:Object(i.d)("DIRECT_MESSAGES_PARTICIPANTS"),fetchConversationIfNeeded:o.fetchConversationIfNeeded};var m=Object(d.g)(p,u),b=n("7JQg"),g=n("I2k/"),v=n("v//M"),f=n("3XMw"),_=n.n(f),y=n("M2mT"),E=n("Es6L"),C=n("rHpw"),I=n("hqDb"),S=n("yw4N");const x=_.a.g2fd3205,w=_.a.d4986f85;class O extends s.Component{constructor(...e){super(...e),r()(this,"_renderList",(()=>{const{conversation:e}=this.props,t=e&&(e.participants||[]).map((({user_id:e})=>e))||[];return s.createElement(I.a,{userIds:t,withItemBorder:!0})})),r()(this,"_handleFetch",(()=>{this._fetchIfNeeded(this.props.conversationId)}))}componentDidMount(){this._handleFetch()}UNSAFE_componentWillReceiveProps(e){this.props.conversationId!==e.conversationId&&this._fetchIfNeeded(e.conversationId)}render(){const{fetchStatus:e,conversationId:t}=this.props;return s.createElement(y.a,{backLocation:`/messages/${t}/info`,documentTitle:w,screenType:"secondaryDetail",title:x},s.createElement(S.a,{style:[M.root,!Object(E.a)()&&M.bottomOffset]},s.createElement(v.a,{fetchStatus:e,onRequestRetry:this._handleFetch,render:this._renderList})))}_fetchIfNeeded(e){const{createLocalApiErrorHandler:t,fetchConversationIfNeeded:n}=this.props;n({conversationId:e}).catch(t(Object(g.a)(e)))}}const M=C.a.create((e=>({root:{backgroundColor:e.colors.cellBackground},bottomOffset:{paddingBottom:`calc(${C.a.theme.componentDimensions.appBarHeight} + ${C.a.iPhoneOffsetBottom})`}})));t.default=Object(b.c)({page:"messages",section:"view_participants"})(m(O))},cOtO:function(e,t,n){"use strict";n.r(t),n.d(t,"DMConversationScreen",(function(){return oe}));var a=n("KEM+"),r=n.n(a),s=(n("MvUL"),n("ERkP")),o=n("HPNB"),i=n("v6aA"),c=n("zh9S"),l=n("MMRb"),d=n("VnFT"),h=n("RqPI"),p=n("oEGd"),u=n("hqKg"),m=(n("Myq3"),n("AQOc")),b=n("z2Pn"),g=n("pNZL"),v=n("G6rE"),f=n("X/yg");const _=(e,t)=>t.match.params.conversationId,y=Object(u.createSelector)(((e,t)=>l.selectConversation(e,_(0,t))),l.selectEntries,_,f.h,h.h,f.i,f.j,v.e.selectAll,((e,t)=>d.j(e,_(0,t))),((e,t)=>d.i(e,_(0,t))),l.selectPoppedOutConversationId,l.selectDrawerVisibility,((e,t,n,a,r,s,o,i,c,l,d,h)=>{const p=e&&e.data;return{conversation:p&&Object(m.a)(p,t,i),conversationId:n,isNewGroupConversation:a,isUploading:c,media:l,newConversationParticipants:s,perspective:r,poppedOutConversationId:d,dmDrawerVisibility:h}})),E=e=>t=>d.c(e,t);var C=Object(p.d)(y,(e=>{return{cancelUpload:(t=e.match.params.conversationId,()=>d.b(t)),googleAnalyticsPageView:c.a,removeMedia:E(e.match.params.conversationId),scribePageImpression:c.d,setLastViewedDmInboxPath:b.h,updateTweetDetailNav:g.b,popOutConversation:l.popOutConversation,setDrawerVisibility:l.setDrawerVisibility};var t})),I=n("7JQg"),S=n("i4Oy"),x=(n("uB9N"),n("Oi4X")),w=n("aA19"),O=n("SrtL"),M=n("3XMw"),T=n.n(M),k=n("rHpw"),R=n("mw9i"),D=n("FIs5");const N=T.a.a2f8105f,A=T.a.fa91f351,P=T.a.b999caa8,L=T.a.de2c3337,B=k.a.create((e=>({root:{alignItems:"center",justifyContent:"center",flex:1,backgroundColor:e.colors.cellBackground}})));class F extends s.PureComponent{render(){const{onButtonPress:e}=this.props;return s.createElement(R.a,{style:B.root},s.createElement(O.a,{title:N}),s.createElement(D.a,{buttonText:L,header:A,message:P,onButtonPress:e}))}}var U=n("xPna"),j=n("XnpN"),H=n("Lsrn"),G=n("shC7"),V=n("k/Ka");const z=(e={})=>Object(V.a)("svg",{...e,style:[H.a.root,e.style,G.a.getConstants().isRTL&&H.a.iconRTL],viewBox:"0 0 24 24"},s.createElement("g",null,s.createElement("path",{d:"M19.687 22H7.813C6.538 22 5.5 20.962 5.5 19.687v-4.452c0-.414.336-.75.75-.75s.75.335.75.75v4.45c0 .45.365.815.813.815h11.873c.448 0 .813-.365.813-.813V7.813c0-.448-.365-.813-.813-.813h-4.452c-.414 0-.75-.336-.75-.75s.336-.75.75-.75h4.452C20.962 5.5 22 6.538 22 7.813v11.873C22 20.962 20.962 22 19.687 22z"}),s.createElement("path",{d:"M11.25 4.045c-.414 0-.75.336-.75.75V9.44L3.064 2.004c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06L9.438 10.5H4.804c-.414 0-.75.336-.75.75s.336.75.75.75h6.445c.414 0 .75-.336.75-.75V4.795c0-.414-.336-.75-.75-.75z"})));z.metadata={width:24,height:24};var W=z,q=n("/yvb"),K=n("6s7X"),$=n("JGUy");const Q=T.a.h810143c;var X=({accessibilityLabel:e,key:t,link:n,style:a})=>{const r=s.createElement(K.a,null),o=Object($.a)();return s.createElement(q.a,{accessibilityLabel:e||Q,hoverLabel:{label:Q},icon:r,key:t,link:n,pullRight:!0,style:a,type:o})},Y=n("7myi"),J=n("M2mT"),Z=n("aITJ"),ee=n("MWbm"),te=n("OhSZ");const ne=T.a.d4986f85,ae=T.a.e3e58b6d,re=T.a.a9ddbb94,se=s.createElement(W,null);class oe extends s.PureComponent{constructor(e,t){super(e,t),r()(this,"_composer",s.createRef()),r()(this,"_handleConversationClose",(e=>{const{conversation:t,history:n}=this.props;null!=t&&t.trusted?n.push("/messages"):e()})),r()(this,"_handlePopOutConvo",(()=>{const{conversationId:e,popOutConversation:t}=this.props;t(e)})),r()(this,"_handlePopInConvoFromScreen",(()=>{const{setDrawerVisibility:e}=this.props;e(U.a.CLOSED)})),r()(this,"_handleInfoClick",(()=>{const{history:e,conversationId:t}=this.props;t&&e.push(`/messages/${t}/info`)})),r()(this,"_updateLastViewDmInboxPath",(()=>{const{setLastViewedDmInboxPath:e,location:t}=this.props;e(t.pathname)}));const{conversationId:n,history:a,location:o,isNewGroupConversation:i}=e;n||i||o.pathname!==window.location.pathname||a.replace({pathname:"/messages"}),this._showDMQuickAccessWithClose=this.context.featureSwitches.isTrue("responsive_web_dm_quick_access_with_close_enabled")}componentDidMount(){const{googleAnalyticsPageView:e,scribeNamespace:t,scribePageImpression:n,updateTweetDetailNav:a}=this.props;n(t),a(t),e(t),this._updateLastViewDmInboxPath()}componentDidUpdate(e){const{conversationId:t}=this.props;t!==e.conversationId&&this._updateLastViewDmInboxPath()}render(){const{conversationId:e,dmDrawerVisibility:t,history:n,location:a,poppedOutConversationId:r,richTextInputContext:o,typeaheadWrapper:i}=this.props,c="string"==typeof a.query.text?a.query.text:void 0,l=S.a.get("window").width>=k.a.theme.breakpoints.small,d=this._showDMQuickAccessWithClose&&e===r&&t!==U.a.CLOSED;return s.createElement(J.a,this._getNavProps(),d?s.createElement(F,{onButtonPress:this._handlePopInConvoFromScreen}):s.createElement(x.a,{conversationId:e,history:n,isWide:l,location:a,prefillText:c,richTextInputContext:o,typeaheadWrapper:i}))}_getNavProps(){const{conversation:e,newConversationParticipants:t,perspective:n}=this.props,a=e&&Object.keys(e.participants).length?Object(te.a)({conversation:e,perspective:n}):t?Object(te.a)({newConversationParticipants:t,perspective:n}):ne,r=e&&Object.keys(e.participants).length?s.createElement(te.b,{conversation:e,perspective:n,titleWeight:"heavy",withScreenName:!1}):t?s.createElement(te.b,{newConversationParticipants:t,perspective:n,titleWeight:"heavy",withScreenName:!1}):ne,o="large",i=n?s.createElement(w.a,{conversation:e,perspective:n,size:o}):void 0,c=e&&e.type===l.CONVERSATION_TYPE.ONE_TO_ONE&&n&&Object(j.a)(e,n).map((({user:e})=>e.screen_name)),d=c?`@${c[0]}`:void 0;return{backLocation:"/messages",onBackClick:this._handleConversationClose,documentTitle:a,rightControl:this._renderRightControl(),title:r,titleIconCell:i,titleIconCellSize:o,subtitle:d,screenType:"primaryDetail",withBottomTabBar:!1,headerless:Z.b.isKaiOS()}}_renderRightControl(){const{conversation:e,conversationId:t}=this.props,n=(null==e?void 0:e.type)===l.CONVERSATION_TYPE.GROUP;return t?s.createElement(ee.a,{style:ie.rightControlStyles},o.a.isTwoColumnLayout(S.a.get("window").width)&&this._showDMQuickAccessWithClose&&s.createElement(q.a,{icon:se,onPress:this._handlePopOutConvo,pullRight:!0,style:ie.infoButton,type:"text"}),s.createElement(X,{accessibilityLabel:n?re:ae,key:t,link:`/messages/${t}/info`,style:ie.infoButton})):void 0}}r()(oe,"contextType",i.a),r()(oe,"defaultProps",{isNewGroupConversation:!1,typeaheadWrapper:Y.a});const ie=k.a.create((e=>({root:{flexGrow:1},activity:{flexBasis:"1px",flexGrow:1,height:"100%"},kaiOSFix:{paddingBottom:20},dragDrop:{flexGrow:1},scrollView:{flexGrow:1},infoButton:{marginRight:e.spaces.space4},offsetBottom:{paddingBottom:k.a.iPhoneOffsetBottom},rightControlStyles:{flexDirection:"row"}})));t.default=Object(I.c)({page:"messages",section:"thread"})(C(oe))},fzwJ:function(e,t,n){"use strict";n.r(t),n.d(t,"DMAddParticipantsScreen",(function(){return K}));var a=n("KEM+"),r=n.n(a),s=(n("kYxP"),n("ERkP")),o=n("k49u"),i=n("VAZu"),c=n("MMRb"),l=n("1YZw"),d=n("lnti"),h=n("0KEI"),p=n("hqKg"),u=n("RqPI"),m=n("G6rE"),b=n("oEGd");const g=(e,t)=>t.match.params.conversationId,v=Object(p.createSelector)(c.selectConversations,(e=>Object(d.a)(Object.keys(e).map((t=>{const n=e[t];if(!n.isDeleted)return n.data}))))),f=Object(p.createSelector)(g,v,((e,t)=>{const n=c.selectConversation(e,g(0,t)),a=n&&n.data;return a&&a.participants}),((e,t)=>c.selectConversationFetchStatus(e,g(0,t))),u.h,m.e.selectAll,((e,t,n,a,r,s)=>{if(!r)throw new Error("logged-in user not found");return{conversationId:e,conversations:t,existingParticipants:n,fetchStatus:a,perspective:r,users:s}})),_={addParticipants:c.addParticipants,addToast:l.b,createLocalApiErrorHandler:Object(h.d)("DIRECT_MESSAGES_ADD_PARTICIPANTS"),fetchConversationIfNeeded:c.fetchConversationIfNeeded};var y=Object(b.g)(f,_),E=n("7JQg"),C=n("I2k/"),I=n("s14A"),S=n("kGix"),x=n("jHSc"),w=n("wO1l"),O=n("AQOc"),M=n("3XMw"),T=n.n(M),k=n("oQhu"),R="addPeopleButtonText",D=n("GZwR"),N=n("2dXj"),A=n("MWbm"),P=n("/yvb"),L=n("rHpw");const B=T.a.c6026009,F=T.a.d4986f85,U=T.a.af40a8ef,j=T.a.e1bde73e,H=T.a.e62d3c10,G=T.a.f17f716a,V=T.a.e3fc3547,z=T.a.c55f5c9a,W=T.a.h8403fb5,q=T.a.ja522ed3;class K extends s.Component{constructor(...e){super(...e),r()(this,"state",{participantsToAdd:[],query:""}),r()(this,"_renderHeader",(()=>{const{conversationId:e,history:t}=this.props;return s.createElement(i.a,{backButtonType:"close",backLocation:`/messages/${e}`,history:t,ref:this._setAppBarRef,rightControl:this._renderAppBarRightControl(),title:B,withBottomBorder:!1})})),r()(this,"_renderAppBarRightControl",(()=>s.createElement(A.a,{style:$.rightColumn},s.createElement(P.a,{disabled:0===this.state.participantsToAdd.length||this.props.fetchStatus!==S.a.LOADED,onPress:this._handleAddSelectedParticipantsToConversation,size:"normalCompact",testID:R,type:"primary"},U)))),r()(this,"_handleQueryChange",(e=>{this.setState({query:e})})),r()(this,"_handleSuggestionClicked",(e=>{const{participantsToAdd:t}=this.state;t.find((({id:t})=>t===e.id))?this._handleUnselectParticipant(e):this.setState({participantsToAdd:[...t,e]})})),r()(this,"_handleUnselectParticipant",(e=>{const{participantsToAdd:t}=this.state;this.setState({participantsToAdd:t.filter((({id:t})=>t!==e.id))})})),r()(this,"_handleAddSelectedParticipantsToConversation",(()=>{const{addParticipants:e,conversationId:t,createLocalApiErrorHandler:n}=this.props,{participantsToAdd:a}=this.state;e(t,a.map((({id:e})=>e))).then((e=>{this._appBarRef&&this._appBarRef.goBack()}),n({defaultToast:{text:q},[o.a.DirectMessageCannotDmOtherUser]:{toast:{text:z}},[o.a.DirectMessageGenericUserCouldNotBeAdded]:{toast:{text:W}},[o.a.DirectMessageOtherUserNotFollowing]:{toast:{text:G}},[o.a.TargetUserNotFound]:{toast:{text:H}},[o.a.TieredActionTweetSpammer]:{toast:{text:V}},showToast:!0}))})),r()(this,"_getInjections",Object(k.a)(((e,t,n,a)=>Object(w.b)(n,e.map((e=>Object(O.b)(e,void 0,a))),t).slice(0,12)))),r()(this,"_getItemIsDisabled",(e=>{const{data:t}=e;return!(t.can_dm||t.is_dm_able)})),r()(this,"_getItemDisabledMessage",(e=>j({screenName:e.data.screen_name}))),r()(this,"_setAppBarRef",(e=>{this._appBarRef=e}))}UNSAFE_componentWillMount(){const{createLocalApiErrorHandler:e,conversationId:t,fetchConversationIfNeeded:n}=this.props;n({conversationId:t}).catch(e(Object(C.a)(t)))}render(){const{conversations:e,existingParticipants:t,perspective:n,users:a}=this.props,{query:r}=this.state,o=t&&t.map((({user_id:e})=>e));return s.createElement(x.b,{containerStyle:$.fill,documentTitle:F,renderHeader:this._renderHeader},s.createElement(I.a,{style:$.fill},s.createElement(N.d,{getItemDisabledMessage:this._getItemDisabledMessage,getItemIsDisabled:this._getItemIsDisabled,injections:this._getInjections(e,n,r,a),onQueryChange:this._handleQueryChange,onRemove:this._handleUnselectParticipant,onSelect:this._handleSuggestionClicked,preselectedUsers:o,selectedUsers:this.state.participantsToAdd,source:D.d.ComposeMessage,withCompactPills:!0})))}}r()(K,"defaultProps",{existingParticipants:[]});const $=L.a.create((e=>({fill:{flex:1},rightColumn:{flexDirection:"row",flexGrow:1,justifyContent:"flex-end",alignItems:"center"}})));t.default=Object(E.c)({page:"messages",section:"add_participants"})(y(K))},hqDb:function(e,t,n){"use strict";var a=n("97Jx"),r=n.n(a),s=n("KEM+"),o=n.n(s),i=(n("kYxP"),n("ERkP")),c=n("k49u"),l=n("rxPX"),d=n("0KEI"),h=n("6xIQ"),p=n("kGix"),u=n("G6rE");const m=(e,t)=>t.userIds,b=(e,t)=>{const{userIds:n}=t;return n.filter((t=>!!u.e.select(e,t)))},g=(e,t)=>{const{userIds:n}=t;return n.reduce(((t,n)=>{const a=u.e.selectFetchStatus(e,n);return t[n]=a===p.a.NONE?p.a.LOADING:a,t}),{})};var v=Object(l.a)().propsFromState((()=>({availableUserIds:Object(h.a)(b,(e=>e)),fetchStatus:Object(h.a)(b,g,m,((e,t,n)=>{let a=p.a.LOADED;for(let r=0;r<n.length;r++){const s=n[r];if(-1===e.indexOf(s)){const e=t[s]||p.a.LOADING;a=a===p.a.LOADED?e:a}if(a===p.a.LOADED)break}return a}))}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(d.d)("USERS_LIST_CONTAINER"),fetchUsersIfNeeded:u.e.fetchManyIfNeeded}))),f=n("v//M"),_=n("3XMw"),y=n.n(_),E=n("pQ3Z"),C=n.n(E),I=n("cFuS"),S=n("Re5t"),x=n("MWbm"),w=n("88ay");const O=({displayMode:e,renderUserCell:t,withFinalItemBorder:n,withItemBorder:a,userIds:r})=>i.createElement(x.a,null,r.map(((s,o)=>{const c=o===r.length-1,l=c&&a&&n||!c&&a;return t?t(s):i.createElement(w.b,{decoration:w.d,displayMode:e,key:s,promotedItemType:I.c.USER,userId:s,withBottomBorder:!!l,withFollowsYou:!0})})));O.defaultProps={displayMode:S.a.UserDetailed,withFinalItemBorder:!0,withItemBorder:!1};var M=O;const T=y.a.f5b426c2,k={viewType:"user_list"};class R extends i.Component{constructor(...e){super(...e),o()(this,"state",{allUsersUnavailable:!1}),o()(this,"_renderContent",(()=>{const{availableUserIds:e,createLocalApiErrorHandler:t,fetchStatus:n,fetchUsersIfNeeded:a,userIds:s,...o}=this.props;return i.createElement(M,r()({},o,{userIds:e}))})),o()(this,"_handleFetch",(()=>{this._fetchUsersIfNeeded()}))}componentDidMount(){this._fetchUsersIfNeeded()}componentDidUpdate(e){C()(e.userIds,this.props.userIds)||this._fetchUsersIfNeeded()}render(){return i.createElement(f.a,{accessibilityLabel:T,clientEventContext:k,fetchStatus:this.state.allUsersUnavailable?p.a.LOADED:this.props.fetchStatus,onRequestRetry:this._handleFetch,render:this._renderContent,retryable:!1})}_fetchUsersIfNeeded(){const{createLocalApiErrorHandler:e,fetchUsersIfNeeded:t,availableUserIds:n,userIds:a}=this.props;t(a).then((()=>{this.setState({allUsersUnavailable:!1})}),e({[c.a.AddressBookLookupNotFound]:{customAction:()=>{0===n.length&&this.setState({allUsersUnavailable:!0})}},[c.a.OtherUserSuspended]:{customAction:()=>{0===n.length&&this.setState({allUsersUnavailable:!0})}}}))}}const D=v(R);t.a=D},lL5k:function(e,t,n){"use strict";var a=/[|\\{}()[\]^$+*?.]/g;e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(a,"\\$&")}},"p+r5":function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var a=n("97Jx"),r=n.n(a),s=n("KEM+"),o=n.n(s),i=n("ERkP"),c=n("t62R"),l=n("piX5"),d=n("3XMw"),h=n.n(d),p=n("tI3i"),u=n.n(p),m=n("oQhu"),b=n("rHpw"),g=n("aITJ"),v=n("MWbm"),f=(n("aWzz"),n("Oib4")),_=n("WtWS"),y=n("ioan");const E=e=>e.length,C=(e,t=E)=>t(e);class I extends i.Component{constructor(e){super(e),o()(this,"_blurOnBackspaceKeyUpForKaiOS",!1),o()(this,"_isLabelLarge",(()=>{const{isFocused:e,actualCount:t}=this.state;return!t&&!e})),o()(this,"_getTextInputStyle",Object(m.a)((e=>[S.root,!e&&S.disabled]))),o()(this,"_calculateLength",(e=>C(e,this.props.calculateLength))),o()(this,"_shouldRenderDisplayCount",(()=>{const{isFocused:e}=this.state,t=this._isFormInvalid();return Boolean((e||t)&&this._getMaxDisplayCount())})),o()(this,"_isInvalidNumber",(()=>{var e,t,n,a,r;const{type:s}=this.props,o=null==(e=this._textInput)||null==(t=e._textInputNode)?void 0:t.value,i=null==(n=this._textInput)||null==(a=n._textInputNode)||null==(r=a.validity)?void 0:r.badInput;return"number"===s&&""===o&&!0===i})),o()(this,"_getActualCount",(e=>{let t=e.length;return this._isInvalidNumber()&&(t=1),t})),o()(this,"_handleBlur",(e=>{const{onBlur:t}=this.props,{value:n}=e.currentTarget,a=this._calculateLength(n),r=this._getActualCount(n);this.setState({isFocused:!1,displayCount:a,actualCount:r}),t&&t(e)})),o()(this,"_handleChange",(e=>{const{onChange:t}=this.props,{value:n}=e.currentTarget,a=this._calculateLength(n),r=this._getActualCount(n);this.setState({isFocused:!0,displayCount:a,actualCount:r}),t&&t(e)})),o()(this,"_handleFocus",(e=>{const{onFocus:t}=this.props;this.setState({isFocused:!0}),t&&t(e)})),o()(this,"_handleKeyPress",(e=>{const{multiline:t,onKeyPress:n,onSubmitEditing:a}=this.props;n&&n(e),e.isDefaultPrevented()||"Enter"!==e.key||e.shiftKey||t||!a||(e.preventDefault(),a(e))})),o()(this,"_handleKeyDown",(e=>{const{onKeyDown:t}=this.props,{displayCount:n}=this.state,a=0===n;g.b.isKaiOS()&&"Backspace"===e.key&&a?this._blurOnBackspaceKeyUpForKaiOS=a:t&&t(e)})),o()(this,"_handleKeyUp",(e=>{const{onKeyUp:t}=this.props;g.b.isKaiOS()&&"Backspace"===e.key&&this._blurOnBackspaceKeyUpForKaiOS&&(e.preventDefault(),this.blur()),t&&t(e)})),o()(this,"_setTextInputRef",(e=>{this._textInput=e})),o()(this,"_checkComponentPropsUsageCorrectness",(e=>{const{defaultValue:t,maxLength:n,validLength:a,value:r,onChange:s}=e,o=!!s,i="string"==typeof r,c="string"==typeof t;u()(!(!c&&i&&!o),"A controlled component, a component with a value prop, must have an onChange handler. The value prop cannot be undefined."),u()(!(n&&a&&a>n),"Max length should be equal or greater than valid length."),u()(!(void 0!==n&&n<=0||void 0!==a&&a<=0),"Set editable to false instead of limiting the valid character count to 0.")})),o()(this,"_exceedsValidLength",(e=>{const t=this._getMaxDisplayCount();return!!t&&e>t})),o()(this,"_getMaxDisplayCount",(()=>this.props.validLength||this.props.maxLength)),this._checkComponentPropsUsageCorrectness(e);const{defaultValue:t,value:n}=e;this.state={displayCount:this._calculateLength(n||t||""),actualCount:E(n||t||""),isFocused:!1}}componentDidUpdate(e){const{validLength:t,maxLength:n,onChange:a,value:r}=this.props,{validLength:s,maxLength:o,onChange:i,value:c}=e;s===t&&n===o&&!!a===!!i&&"string"==typeof r===("string"==typeof c)||this._checkComponentPropsUsageCorrectness(this.props)}static getDerivedStateFromProps(e,t){const{calculateLength:n,value:a}=e,r="string"==typeof a?C(a,n):0;return"string"==typeof a&&r!==t.displayCount?{displayCount:r,actualCount:a.length}:null}render(){const{accessibilityLabel:e,errorText:t,helperText:n,style:a,editable:r}=this.props,{isFocused:s}=this.state,o=this._isFormInvalid();return i.createElement(v.a,{style:[x.root,a]},i.createElement(v.a,{accessibilityLabel:e,accessibilityRole:"label",style:[l.a.border,x.textInputFormStyle,o&&l.a.invalidBorderColor,s&&o&&l.a.focusedBorderInvalid,s&&!o&&l.a.focusedBorderValid,!r&&l.a.disabled]},i.createElement(v.a,{style:x.textInputFormWrapper},i.createElement(v.a,{style:[x.textInputHeader]},this._renderLabel(),this._shouldRenderDisplayCount()?this._renderDisplayCount():null),this._renderTextInput())),i.createElement(v.a,{style:[x.sidePadding,x.underTextInputForm]},i.createElement(v.a,{style:x.subtextWrapper},n?this._renderHelperText():null,o&&t?this._renderErrorText():null)))}_renderLabel(){const{label:e}=this.props,{isFocused:t}=this.state,n=t?"primary":"gray600",a=this._isFormInvalid()?"red500":n,r=this._isLabelLarge();return i.createElement(c.c,{color:r?"gray600":a,numberOfLines:1,size:r?"large":"small",style:[x.textInputHeaderItem,r&&x.placeholderText,x.transition]},e)}_renderTextInput(){const{accessibilityLabel:e,calculateLength:t,editable:n,errorText:a,helperText:s,Icon:o,invalid:l,label:d,maxLength:h,onBlur:p,onChange:u,onSubmitEditing:m,onFocus:b,onKeyDown:g,onKeyPress:f,onKeyUp:_,showValidationIcon:E,style:C,validLength:I,...x}=this.props,w=this.getValue(),O=this._calculateLength(w),M=h?h+w.length-O:void 0;return i.createElement(v.a,{style:S.container},o&&!this._isLabelLarge()?this._renderIcon():null,i.createElement(c.c,{size:"large",style:S.wrapper},i.createElement(y.a,r()({},x,{editable:n,maxLength:M,onBlur:this._handleBlur,onChange:this._handleChange,onFocus:this._handleFocus,onKeyDown:this._handleKeyDown,onKeyPress:this._handleKeyPress,onKeyUp:this._handleKeyUp,ref:this._setTextInputRef,style:this._getTextInputStyle(n)}))),E&&!this._isLabelLarge()?this._renderValidationIcon():null)}_renderHelperText(){return i.createElement(v.a,{accessibilityLiveRegion:"polite"},i.createElement(c.c,{color:"gray600",size:"small",style:x.subtext},this.props.helperText))}_renderErrorText(){return i.createElement(v.a,{accessibilityLiveRegion:"assertive"},i.createElement(c.c,{color:"red500",size:"small",style:x.subtext},this.props.errorText))}_renderDisplayCount(){const{displayCount:e}=this.state,t=this._getMaxDisplayCount(),n=this._exceedsValidLength(e),a=t&&h.a.ia24dc8c(t),r=h.a.ia24dc8c(e);return i.createElement(v.a,{accessibilityLiveRegion:"polite",style:[x.textInputHeaderItem,x.displayCount]},i.createElement(c.c,{color:n?"red500":"gray600",size:"small"},a?`${r} / ${a}`:""))}_renderIcon(){const{Icon:e}=this.props,{isFocused:t}=this.state,n=[x.icon,t&&x.focusedIcon];return e&&i.createElement(e,{style:n})}_renderValidationIcon(){return this._isFormInvalid()?i.createElement(f.a,{style:[x.validationIcon,l.a.invalidColor]}):i.createElement(_.a,{style:[x.validationIcon,l.a.validColor]})}_isFormInvalid(){const{displayCount:e}=this.state;return this.props.invalid||this._exceedsValidLength(e)||this._isInvalidNumber()}blur(){this._textInput&&this._textInput.blur()}getValue(){return this._textInput&&this._textInput.getValue()||""}focus(){this._textInput&&this._textInput.focus()}isValidLength(){const e=this.getValue(),t=this._calculateLength(e);return!this._exceedsValidLength(t)}}o()(I,"defaultProps",{autoComplete:"on",autoCorrect:!0,autoFocus:!1,editable:!0,invalid:!1}),I.propTypes={};const S=b.a.create((e=>({container:{flexDirection:"row",flexGrow:1,flexShrink:1,overflow:"hidden",paddingBottom:e.spaces.space8,paddingHorizontal:e.spaces.space8,paddingTop:e.spaces.space12,marginTop:e.spaces.space16},root:{backgroundColor:"transparent",borderRadius:e.borderRadii.none,borderWidth:e.borderWidths.none,boxSizing:"border-box",color:"inherit",fontFamily:"inherit",fontSize:"inherit",textAlign:"inherit",outlineStyle:"none",padding:0},wrapper:{alignItems:"center",display:"flex",fontSize:e.fontSizes.headline2,width:"100%"},disabled:{color:e.colors.gray600}}))),x=b.a.create((e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},textInputFormStyle:{flexDirection:"row"},textInputFormWrapper:{flexGrow:1,flexShrink:1},textInputHeader:{flexDirection:"row",justifyContent:"space-between",position:"absolute",height:"100%",width:"100%"},textInputHeaderItem:{paddingTop:e.spaces.space8,paddingHorizontal:e.spaces.space8,fontSize:"small"},placeholderText:{paddingTop:e.spaces.space16,fontSize:e.fontSizes.headline2},displayCount:{flexGrow:1,alignItems:"flex-end"},sidePadding:{paddingHorizontal:e.spaces.space8},underTextInputForm:{flexDirection:"row"},subtextWrapper:{flexDirection:"column",flex:1,paddingRight:e.spaces.space20,paddingTop:e.spaces.space2},subtext:{alignSelf:"flex-start"},focusedIcon:{color:e.colors.primary},icon:{alignSelf:"center",color:e.colors.gray600,paddingRight:e.spaces.space4},validationIcon:{alignSelf:"center",paddingLeft:e.spaces.space4},transition:{transition:"transform 150ms cubic-bezier(0.4, 0, 0.2, 1), color 150ms cubic-bezier(0.4, 0, 0.2, 1), font-size 150ms cubic-bezier(0.4, 0, 0.2, 1), padding-top 150ms cubic-bezier(0.4, 0, 0.2, 1)"}})))},piX5:function(e,t,n){"use strict";const a=n("rHpw").a.create((e=>({border:{borderRadius:e.borderRadii.small,borderWidth:e.borderWidths.small,borderColor:e.colors.gray200},focusedBorderValid:{boxShadow:`0 0 0 ${e.borderWidths.small} ${e.colors.primary}`,borderColor:e.colors.primary},focusedBorderInvalid:{boxShadow:`0 0 0 ${e.borderWidths.small} ${e.colors.red500}`},invalidBorderColor:{borderColor:e.colors.red500},invalidColor:{color:e.colors.red500},validColor:{color:e.colors.primary},disabled:{cursor:"default",opacity:.5,backgroundColor:e.colors.gray50,borderColor:e.colors.gray50}})));t.a=a},"qS4/":function(e,t,n){"use strict";var a=n("KEM+"),r=n.n(a),s=(n("kYxP"),n("ERkP")),o=n("BUB3"),i=n("v6aA"),c=n("s14A"),l=(n("MvUL"),n("EbOo")),d=n("MMRb"),h=n("1YZw"),p=n("0KEI"),u=n("hqKg"),m=n("AQOc"),b=n("G6rE"),g=n("oEGd");const v=(e,t)=>t.conversationId,f=Object(u.createSelector)(v,((e,t)=>d.selectConversation(e,v(0,t))),d.selectEntries,b.e.selectAll,((e,t)=>!d.selectConversationIsRead(e,v(0,t))),((e,t)=>{const n=v(0,t);return Object(d.selectInboxTypeByConversation)(e,n)}),d.selectSearchQuery,((e,t,n,a,r,s,o)=>({conversation:t&&Object(m.a)(t.data,n,a),conversationId:e,unread:r,inboxType:s,searchQuery:o}))),_={addRecentSearch:d.addRecentSearches,addToast:h.b,block:b.e.block,createLocalApiErrorHandler:Object(p.d)("DIRECT_MESSAGES_INBOX_ITEM"),leaveConversation:d.leaveConversation,muteDMUser:d.muteDMUser,unmuteDMUser:d.unmuteDMUser,unblock:b.e.unblock};var y=Object(g.g)(f,_),E=n("aA19"),C=n("OhSZ"),I=n("t62R"),S=n("g54k");const x=Object(u.createSelector)(b.e.selectAll,((e,t)=>t.entry),S.b);var w=Object(g.c)(x),O=n("zQEV");var M=w((({entry:e,entryType:t,perspective:n,users:a})=>{const r=Object(O.a)(e,t,n,a);return s.createElement(I.c,{color:"gray600"},r)}));const T=Object(u.createSelector)(((e,t)=>b.e.select(e,t.senderId)),((e,t)=>t.recipientId?b.e.select(e,t.recipientId):void 0),((e,t)=>({user:e,recipient:t})));var k=Object(g.c)(T),R=n("X/yg"),D=n("cTG8"),N=n("3XMw"),A=n.n(N);const P=e=>s.createElement(A.a.I18NFormatMessage,{$i18n:"b3a2b11c"},s.createElement(I.c,null,e)),L=A.a.dedfd265;const B=A.a.a876e58b,F=A.a.bf584cd1,U=A.a.a9cc8cfd,j=A.a.e20b65b0,H=A.a.e5bfe07d,G=A.a.b1a614fe;var V=k((({entry:e,perspective:t,isGroupDM:n,user:a={},recipient:r={}})=>{const{featureSwitches:o}=s.useContext(i.a),c=e&&e.message_data;if(!c)return null;const{attachment:l}=c,d=l&&!!(l.video||l.photo||l.animated_gif||l.tweet||l.fleet||l.sticker||l.card),h=t===a.id_str,p=!(!d||!h)||!(!n||h),u=a.name,m=r.name;let b=[p&&s.createElement(I.c,{key:"senderName"},P(u)," "),c&&c.text&&s.createElement(D.a,{displayTextRange:[0,c.text.length],entities:c.entities,key:"message",text:c.text,withMediaLinks:!0})];return l&&(l.tweet?b=p?((e,t)=>e?s.createElement(I.c,null,A.a.d5b762c8):s.createElement(A.a.I18NFormatMessage,{$i18n:"dfd2b3b9"},s.createElement(I.c,null,t)))(h,u):G:l.fleet?b=((e,t,n)=>e?s.createElement(A.a.I18NFormatMessage,{$i18n:"i005f1fd"},s.createElement(I.c,null,t),s.createElement(I.c,null,n||"")):s.createElement(A.a.I18NFormatMessage,{$i18n:"b35cee40"},s.createElement(I.c,null,n||"")))(h,m,c.text):l.video?b=Object(R.g)(l,o)?p?function(e,t){return e?s.createElement(I.c,null,A.a.h7033cac):s.createElement(A.a.I18NFormatMessage,{$i18n:"be5a9616"},s.createElement(I.c,null,t))}(h,u):L:p?((e,t)=>e?s.createElement(I.c,null,A.a.j7d81019):s.createElement(A.a.I18NFormatMessage,{$i18n:"eee2f120"},s.createElement(I.c,null,t)))(h,u):B:l.photo?b=p?((e,t)=>e?s.createElement(I.c,null,A.a.f80629ba):s.createElement(A.a.I18NFormatMessage,{$i18n:"c1e1f848"},s.createElement(I.c,null,t)))(h,u):F:l.animated_gif?b=p?((e,t)=>e?s.createElement(I.c,null,A.a.eb3d722e):s.createElement(A.a.I18NFormatMessage,{$i18n:"dc4b75a1"},s.createElement(I.c,null,t)))(h,u):U:l.sticker?b=p?((e,t)=>e?s.createElement(I.c,null,A.a.d30c2d4f):s.createElement(A.a.I18NFormatMessage,{$i18n:"c7e2464e"},s.createElement(I.c,null,t)))(h,u):j:l.card&&(b=p?((e,t)=>e?s.createElement(I.c,null,A.a.db53c017):s.createElement(A.a.I18NFormatMessage,{$i18n:"hcbbbb34"},s.createElement(I.c,null,t)))(h,u):H)),s.createElement(I.c,{color:"gray600",numberOfLines:1},b)})),z=n("uKEd");const W=(e,t)=>t.senderId?b.e.select(e,t.senderId):void 0,q=(e,t)=>Object(z.n)(e,t.reactionEntry.message_id),K=(e,t)=>{const n=q(e,t);return n&&n.message_data&&b.e.select(e,n.message_data.sender_id)};var $=Object(g.e)((()=>Object(u.createSelector)(W,q,K,((e,t,n)=>({reactedMessageEntry:t,reactingUser:e,messageUser:n})))),{}),Q=n("33Kz");var X=$((({isGroupDM:e,messageUser:t,perspective:n,reactionEntry:a,reactedMessageEntry:r,reactingUser:o})=>{const{featureSwitches:c}=s.useContext(i.a),l=r&&r.message_data,d=l&&l.attachment,h=l&&l.text,p=t&&t.screen_name,u=n===(o&&o.id_str),m=o&&o.name,b=Object(Q.b)(a.reaction_key||"",c);let g;return g=d&&d.tweet?e?((e,t,n,a)=>e?s.createElement(A.a.I18NFormatMessage,{$i18n:"c4202784"},s.createElement(I.c,null,n),s.createElement(I.c,null,a)):s.createElement(A.a.I18NFormatMessage,{$i18n:"b493a890"},s.createElement(I.c,null,t),s.createElement(I.c,null,n),s.createElement(I.c,null,a)))(u,m,p,b):((e,t,n)=>e?s.createElement(A.a.I18NFormatMessage,{$i18n:"ca684bf5"},s.createElement(I.c,null,n)):s.createElement(A.a.I18NFormatMessage,{$i18n:"h5797be5"},s.createElement(I.c,null,t),s.createElement(I.c,null,n)))(u,m,b):d&&d.video?e?((e,t,n,a)=>e?s.createElement(A.a.I18NFormatMessage,{$i18n:"d1f8bdd9"},s.createElement(I.c,null,n),s.createElement(I.c,null,a)):s.createElement(A.a.I18NFormatMessage,{$i18n:"d764af97"},s.createElement(I.c,null,t),s.createElement(I.c,null,n),s.createElement(I.c,null,a)))(u,m,p,b):((e,t,n)=>e?s.createElement(A.a.I18NFormatMessage,{$i18n:"ab1cdfe2"},s.createElement(I.c,null,n)):s.createElement(A.a.I18NFormatMessage,{$i18n:"f0cf1699"},s.createElement(I.c,null,t),s.createElement(I.c,null,n)))(u,m,b):d&&d.photo?e?((e,t,n,a)=>e?s.createElement(A.a.I18NFormatMessage,{$i18n:"hec0fd4d"},s.createElement(I.c,null,n),s.createElement(I.c,null,a)):s.createElement(A.a.I18NFormatMessage,{$i18n:"j55320de"},s.createElement(I.c,null,t),s.createElement(I.c,null,n),s.createElement(I.c,null,a)))(u,m,p,b):((e,t,n)=>e?s.createElement(A.a.I18NFormatMessage,{$i18n:"jf27606a"},s.createElement(I.c,null,n)):s.createElement(A.a.I18NFormatMessage,{$i18n:"cd110359"},s.createElement(I.c,null,t),s.createElement(I.c,null,n)))(u,m,b):d&&d.animated_gif?e?((e,t,n,a)=>e?s.createElement(A.a.I18NFormatMessage,{$i18n:"e70dcc35"},s.createElement(I.c,null,n),s.createElement(I.c,null,a)):s.createElement(A.a.I18NFormatMessage,{$i18n:"g1bf440b"},s.createElement(I.c,null,t),s.createElement(I.c,null,n),s.createElement(I.c,null,a)))(u,m,p,b):((e,t,n)=>e?s.createElement(A.a.I18NFormatMessage,{$i18n:"b2da1bf8"},s.createElement(I.c,null,n)):s.createElement(A.a.I18NFormatMessage,{$i18n:"g84c0421"},s.createElement(I.c,null,t),s.createElement(I.c,null,n)))(u,m,b):d&&d.card?e?((e,t,n,a)=>e?s.createElement(A.a.I18NFormatMessage,{$i18n:"cd2e7c18"},s.createElement(I.c,null,n),s.createElement(I.c,null,a)):s.createElement(A.a.I18NFormatMessage,{$i18n:"aee9e7fa"},s.createElement(I.c,null,t),s.createElement(I.c,null,n),s.createElement(I.c,null,a)))(u,m,p,b):((e,t,n)=>e?s.createElement(A.a.I18NFormatMessage,{$i18n:"f9fb1cf6"},s.createElement(I.c,null,n)):s.createElement(A.a.I18NFormatMessage,{$i18n:"f2bf910e"},s.createElement(I.c,null,t),s.createElement(I.c,null,n)))(u,m,b):h?e?((e,t,n,a,r)=>e?s.createElement(A.a.I18NFormatMessage,{$i18n:"i6cec545"},s.createElement(I.c,null,a),s.createElement(I.c,null,n),s.createElement(I.c,null,r)):s.createElement(A.a.I18NFormatMessage,{$i18n:"d6998baa"},s.createElement(I.c,null,t),s.createElement(I.c,null,a),s.createElement(I.c,null,n),s.createElement(I.c,null,r)))(u,m,b,p,h):((e,t,n,a)=>e?s.createElement(A.a.I18NFormatMessage,{$i18n:"cec676f3"},s.createElement(I.c,null,n),s.createElement(I.c,null,a)):s.createElement(A.a.I18NFormatMessage,{$i18n:"a2706f9a"},s.createElement(I.c,null,t),s.createElement(I.c,null,n),s.createElement(I.c,null,a)))(u,m,b,h):((e,t,n)=>e?s.createElement(A.a.I18NFormatMessage,{$i18n:"d6b15bbf"},s.createElement(I.c,null,n)):s.createElement(A.a.I18NFormatMessage,{$i18n:"ac0d4bc7"},s.createElement(I.c,null,t),s.createElement(I.c,null,n)))(u,m,b),s.createElement(I.c,{color:"gray600",numberOfLines:1},g)})),Y=n("H4nC"),J=n("b9JY");const Z=A.a.fb3ccb55;var ee=({conversationType:e,entry:t,perspective:n})=>{if(t.marked_as_spam)return s.createElement(I.c,{color:"gray600",numberOfLines:1},Z);if(Object(J.b)(t)){const{message_data:{sender_id:a,recipient_id:r}={}}=t;return s.createElement(V,{entry:t,isGroupDM:e===d.CONVERSATION_TYPE.GROUP,perspective:n,recipientId:r,senderId:a})}return Object(J.c)(t)?s.createElement(X,{isGroupDM:e===d.CONVERSATION_TYPE.GROUP,perspective:n,reactionEntry:t,senderId:t.sender_id}):Object(J.a)(t)?s.createElement(M,{entry:t,entryType:t.type,perspective:n}):Object(J.d)(t)?s.createElement(Y.a,{entry:t,isCompact:!0}):null},te=n("Myq3"),ne=n("3wZR"),ae=n("XnpN"),re=n("xPna"),se=n("b2lu"),oe="conversation",ie=n("u0B7"),ce=n("MWbm"),le=n("Irs7"),de=n("0PHd"),he=n("yrzJ"),pe=n("Xrkv"),ue=n("/yvb"),me=n("eb3s"),be=n("lHOd"),ge=n("efqG"),ve=n("GBcw"),fe=n("htQn"),_e=n("5mJL"),ye=n("rHpw"),Ee=n("vMjK"),Ce=n("aWyx"),Ie=n("hiGS"),Se=n("5oT/"),xe=n("Lsrn"),we=n("k/Ka");const Oe=(e={})=>Object(we.a)("svg",{...e,style:[xe.a.root,e.style],viewBox:"0 0 24 24"},s.createElement("g",null,s.createElement("path",{d:"M22.238 2.257c-.293-.293-.768-.293-1.06 0L2.52 20.917c-.293.292-.293.767 0 1.06.146.146.338.22.53.22s.384-.073.53-.22l18.658-18.66c.293-.293.293-.767 0-1.06zM2.986 17.82c.155 0 .312-.048.446-.148.112-.083 2.752-2.104 2.708-7.248-.02-2.16.643-3.98 1.913-5.266 1.093-1.107 2.577-1.72 4.18-1.727 1.325.006 2.562.42 3.578 1.195.137.104.297.153.455.153.227 0 .45-.102.598-.295.25-.33.188-.8-.142-1.052-1.278-.975-2.828-1.493-4.483-1.5h-.003c-2.008.008-3.87.78-5.248 2.173-1.536 1.551-2.368 3.8-2.348 6.332.037 4.33-2.02 5.967-2.103 6.03-.332.247-.4.718-.154 1.05.147.2.374.303.603.303zm16.844-7.382c.002-.246-.003-.487-.017-.723-.024-.414-.387-.74-.792-.706-.413.023-.728.378-.705.79.012.205.017.413.015.624-.024 2.868.785 4.765 1.526 5.896h-8.314c-.414 0-.75.336-.75.75s.336.75.75.75h3.522c-.1 1.48-1.323 2.66-2.828 2.66-1.003 0-1.913-.514-2.436-1.372-.214-.354-.675-.467-1.03-.25-.354.214-.467.675-.25 1.03.795 1.31 2.185 2.09 3.716 2.09 2.332 0 4.227-1.85 4.328-4.158h4.922c.32 0 .604-.206.707-.51.104-.305 0-.643-.255-.84-.087-.066-2.145-1.7-2.108-6.032z"})));Oe.metadata={width:24,height:24};var Me=Oe;const Te=A.a.gde6b424,ke=A.a.e308019b,Re=A.a.gf5e9ea6,De=A.a.gdf4b79f,Ne=A.a.bbf83d83,Ae=A.a.d96cf7cd,Pe=A.a.d88d0790,Le={component:"low_quality_timeline"},Be=({children:e})=>s.createElement(ce.a,{style:Ue.socialProofContainer},e);class Fe extends s.Component{constructor(...e){super(...e),r()(this,"state",{showConfirmation:!1}),r()(this,"_renderConvoLabel",(({convo_label:e})=>{if(null==e||!e.text)return null;const t=Object(ne.b)(e.icon);return s.createElement(I.c,{color:"gray600",size:"small"},t?s.createElement(t,{style:Ue.convoLabelIcon}):null,e.text)})),r()(this,"_renderSocialProof",(({social_proof:e})=>{if(!e||0===e.length)return null;const t=e[0];switch(t.proof_type){case Ce.d.MUTUAL_FRIENDS:{if(0===t.total)return null;const e=t.users.map((({profile_image_url_https:e})=>e)),n=t.users.map((({name:e})=>e));return s.createElement(Be,null,s.createElement(de.a,{displayFacepileInline:!0,knownFollowersAvatarUrls:e,knownFollowersCount:t.total,knownFollowersNames:n}))}default:return null}})),r()(this,"_renderSearchConversationPreview",(()=>{const{conversation:e,perspective:t}=this.props,n=e?Object(ae.a)(e,t):[],a=n.map((({user:e})=>e)).filter((e=>e.id_str!==t)).map((e=>e.name));if(e){if(e.type===d.CONVERSATION_TYPE.ONE_TO_ONE){const[e]=n.map((({user:e})=>e));return s.createElement(he.a,{color:"gray600",screenName:e.screen_name})}{const e=!0,t=Object(pe.a)(a,e);return s.createElement(I.c,{color:"gray600",numberOfLines:2},t)}}})),r()(this,"_renderTrashcan",(()=>{const{conversationId:e}=this.props;return s.createElement(s.Fragment,null,s.createElement(ue.a,{accessibilityLabel:Ae,borderColor:"transparent",icon:s.createElement(Ie.a,{style:Ue.trashcanIcon}),onPress:this._handleShowConfirmation,type:"destructiveText"}),this.state.showConfirmation?s.createElement(me.a,{confirmButtonLabel:Ae,confirmButtonType:"destructive",headline:De,onCancel:this._handleHideConfirmation,onConfirm:this._deleteConversation(e),text:Ne}):null)})),r()(this,"_renderX",(()=>{const{conversation:e,conversationId:t}=this.props,{loggedInUserId:n}=this.context,a=this.context.featureSwitches.isTrue("dm_conversations_muting_enabled"),r=Object(R.e)(e,n),o=(null==e?void 0:e.type)===d.CONVERSATION_TYPE.GROUP;return s.createElement(be.a.Consumer,null,(n=>s.createElement(ge.a,{renderContent:(i,c)=>s.createElement(se.a,{dismiss:i,flatBorders:"sheet"===c,isGroup:o,isMuted:!(null==e||!e.muted),onBlockClick:this._blockUser(r.idStr),onDeleteClick:this._deleteConversation(t),onMuteDMUserClick:this._handleMuteDMUserClick(n),onReportClick:this._handleReportMenuItemClick(n),onUnmuteDMUserClick:this._handleUnmuteDMUserClick(n),requestorScreenName:r.screenName,showBlock:!o,showCancel:"sheet"===c,showDelete:!0,showMute:a&&!o})},s.createElement(ue.a,{accessibilityLabel:Pe,borderColor:"transparent",icon:s.createElement(Se.a,{style:Ue.xIcon}),onPress:this._handleXPress,style:Ue.xButton,type:"text"}))))})),r()(this,"_handleXPress",(e=>{e.preventDefault()})),r()(this,"_handleReportMenuItemClick",(e=>()=>{const{analytics:t,conversationId:n,inboxType:a}=this.props;if(n){t.scribeAction("report");const r=Object(R.c)(n,window.location.pathname,t.contextualScribeNamespace,a);e.push(r)}})),r()(this,"_handleMuteDMUserClick",(e=>()=>{const{addToast:t,analytics:n,conversation:a,conversationId:r,createLocalApiErrorHandler:s,inboxType:o,muteDMUser:i}=this.props,{loggedInUserId:c}=this.context,{idStr:l,name:d}=Object(R.e)(a,c);i(l,r).then((()=>{t({action:{label:Re,onAction:this._handleUnmuteDMUserClick(e)},text:Te({name:d})}),o!==re.b.tertiary&&e.replace("/messages/requests")}),s()),n.scribeAction("mute_user")})),r()(this,"_handleUnmuteDMUserClick",(e=>()=>{const{addToast:t,analytics:n,conversation:a,conversationId:r,createLocalApiErrorHandler:s,unmuteDMUser:o}=this.props,{loggedInUserId:i}=this.context,{idStr:c,name:l}=Object(R.e)(a,i);r&&(o(c,r).then((()=>{t({action:{label:Re,onAction:this._handleMuteDMUserClick(e)},text:ke({name:l})})}),s()),n.scribeAction("unmute_user"))})),r()(this,"_renderTimestamp",(()=>{const{conversation:e}=this.props;return s.createElement(s.Fragment,null,s.createElement(ce.a,null,e?s.createElement(ve.a,{timestamp:Number(e.sort_timestamp)}):null,null!=e&&e.notifications_disabled?s.createElement(Me,{style:Ue.notificationsDisabledIcon}):null))})),r()(this,"_deleteConversation",(e=>()=>{const{analytics:t,conversation:n,createLocalApiErrorHandler:a,inboxType:r,leaveConversation:s}=this.props,{history:o}=this.context,i=n&&n.type===d.CONVERSATION_TYPE.GROUP?"leave_group":"delete_thread";this._handleHideConfirmation(),t.scribe({element:"thread",action:i}),s({conversationId:e}).catch(a({showToast:!0})),o.replace(Object(R.b)(r))})),r()(this,"_blockUser",(e=>()=>{const{analytics:t,addToast:n,block:a,createLocalApiErrorHandler:r}=this.props;a(e).then((()=>{n({action:{label:Ee.c,onAction:this._createUnblockUserHandler(e)},text:Ee.a})}),r(l.a)),t.scribeAction("block")})),r()(this,"_createUnblockUserHandler",(e=>()=>{const{analytics:t,createLocalApiErrorHandler:n,unblock:a}=this.props;a(e).catch(n(ie.a)),t.scribeAction("unblock")})),r()(this,"_handleHideConfirmation",(()=>{this.setState({showConfirmation:!1})})),r()(this,"_handleOnClick",(e=>{const{addRecentSearch:t,conversationId:n,onClick:a,conversation:r,searchQuery:s}=this.props,o=this.context.featureSwitches.isTrue("responsive_web_dm_server_side_search");s&&o&&t(s),a(e,n,!(null==r||!r.muted),r)})),r()(this,"_handleShowConfirmation",(e=>{const{analytics:t}=this.props;e.stopPropagation(),t.scribe({...Le,element:"accessory_trashcan",action:"click"}),this.setState({showConfirmation:!0})}))}shouldComponentUpdate(e,t){const n=this.props.conversation,a=null==n?void 0:n.conversation_id,r=null==n?void 0:n.last_read_event_id,s=null==n?void 0:n.sort_event_id,o=null==n?void 0:n.max_entry_id,i=null==n?void 0:n.convo_label,c=e.conversation,l=null==c?void 0:c.conversation_id,d=null==c?void 0:c.last_read_event_id,h=null==c?void 0:c.sort_event_id,p=null==c?void 0:c.max_entry_id,u=null==c?void 0:c.convo_label,{filter:m,isActive:b}=this.props,{filter:g,isActive:v}=e,{showConfirmation:f}=this.state,{showConfirmation:_}=t;return a!==l||r!==d||s!==h||o!==p||b!==v||f!==_||m!==g||i!==u}render(){const{conversation:e,searchQuery:t,filter:n,isActive:a,isSecondaryInbox:r,isTertiaryInbox:o,perspective:i,unread:c,link:l}=this.props,d=(null==e?void 0:e.entries)||[],h=Object(te.a)(d,(e=>![Ce.b.MESSAGE_DELETE,Ce.b.REACTION_DELETE,Ce.b.MESSAGE_MARK_AS_SPAM,Ce.b.MESSAGE_MARK_AS_NOT_SPAM,Ce.b.CONVO_METADATA_UPDATE].includes(e.type))),p=[Ue.root,Ue.bottomBorder,c&&Ue.unread],u=this.context.featureSwitches.isTrue("responsive_web_dm_server_side_search"),m=this.context.featureSwitches.isTrue("dm_conversations_requests_inbox_actions_button_enabled"),b=e&&n&&n(e);if(!e||!b&&!u)return null;const g=!!e.convo_label,v=!e.trusted&&!g;return!e||!b&&!u||!t&&e.isSearchResultOnly?null:s.createElement(fe.a,{accessibilityRole:"tab",accessibilityState:{selected:a},link:{pathname:l,anchorless:!0},onPress:this._handleOnClick,style:p,testID:oe},s.createElement(_e.a,{avatarCell:s.createElement(E.a,{conversation:e,perspective:i})},s.createElement(ce.a,{style:Ue.bodyColumn},s.createElement(ce.a,{style:Ue.titleContainer},s.createElement(C.b,{conversation:e,isSearchTitle:!!t&&u,perspective:i,withScreenName:!t}),s.createElement(ce.a,{style:Ue.snippet},!h||u&&t?u&&t?this._renderSearchConversationPreview():null:s.createElement(ee,{conversationType:e.type,entry:h,perspective:i})),g?this._renderConvoLabel(e):null,v?this._renderSocialProof(e):null),m&&(r||o)?this._renderX():o?this._renderTrashcan():this._renderTimestamp())))}}r()(Fe,"contextType",i.a),r()(Fe,"defaultProps",{searchQuery:"",isActive:!1,isSecondaryInbox:!1,isTertiaryInbox:!1,filter:e=>!0,unread:!1});const Ue=ye.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space16,width:"100%"},bottomBorder:{borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor},bodyColumn:{flexDirection:"row"},titleContainer:{flex:1},notificationsDisabledIcon:{alignSelf:"flex-end",color:e.colors.gray600,paddingTop:e.spaces.space4},xButton:{alignSelf:"center",marginRight:`calc(-1 * ${e.spaces.space4})`},xIcon:{color:e.colors.red500},trashcanIcon:{color:e.colors.gray600},snippet:{maxHeight:e.spaces.space40,overflow:"hidden"},unread:{backgroundColor:e.colors.unreadCellBackground},socialProofContainer:{marginTop:e.spaces.space4},convoLabelIcon:{marginRight:e.spaces.space4}})));var je=Object(le.a)(y(Fe),{page:"messages",section:"inbox"});const He=d.selectRecentSearches,Ge=d.selectSearchFetchStatus,Ve=d.selectSearchConversations,ze=(e,t)=>null!=e&&e.length?t.filter((t=>e.indexOf(t)>-1)):e,We=Object(u.createSelector)(He,Ge,Ve,((e,t)=>t.conversationIds||[]),((e,t,n,a)=>{const r="loading"===t&&n.length;return{recentSearches:e,searchConversationIds:ze(n,a),searchFetchStatus:"none"===t||r?"loaded":t,conversationIds:a}})),qe={addRecentSearch:d.addRecentSearches,search:d.searchConversations,clearCurrentSearch:d.clearCurrentSearch,clearRecentSearch:d.clearRecentSearch,clearRecentSearches:d.clearRecentSearches};var Ke=Object(g.g)(We,qe),$e=n("VY6S");const Qe=A.a.b08821f3,Xe=A.a.fb3c8e74,Ye=A.a.e047b8fa;class Je extends s.PureComponent{render(){const{clearRecentSearches:e}=this.props;return s.createElement(ce.a,{style:Ze.header},s.createElement(I.c,{size:"large",weight:"heavy"},Xe),s.createElement(ue.a,{accessibilityLabel:Qe,onPress:e,pullRight:!0,style:Ze.backButton,type:"invertedPrimary"},Ye))}}const Ze=ye.a.create((e=>({backButton:{marginRight:e.spaces.space4},header:{backgroundColor:e.colors.cellBackground,paddingLeft:e.spaces.space16,paddingVertical:e.spaces.space4,alignItems:"center",flexDirection:"row",justifyContent:"space-between",borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor}})));var et=Je,tt=n("j7Bv"),nt=n("VwDm"),at=n("hOZg");const rt=A.a.ia5e7487;class st extends s.PureComponent{render(){const{clearRecentSearch:e,handleRecentSearchClick:t,recentSearch:n}=this.props,a=s.createElement(tt.a,{Icon:nt.a,color:"neutral",size:"xLarge",style:ot.searchIcon}),r=[ot.listItemView,ot.bottomBorder];return s.createElement(fe.a,{onPress:t,style:r},s.createElement(ce.a,null,s.createElement(_e.a,{avatarCell:a,avatarSize:"xLarge",cellStyle:ot.avatarColumn},s.createElement(ce.a,{style:ot.container},s.createElement(I.c,{numberOfLines:1},n),s.createElement(ue.a,{accessibilityLabel:rt,borderColor:"transparent",icon:s.createElement(at.a,null),onPress:e,type:"text"})))))}}const ot=ye.a.create((e=>({container:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},searchIcon:{marginRight:e.spaces.space12,padding:e.spaces.space4},avatarColumn:{flexGrow:1,minWidth:"32px"},bottomBorder:{borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor},listItemView:{backgroundColor:e.colors.cellBackground,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space12,width:"100%"}})));var it=st,ct=n("v//M"),lt=n("VPAj");var dt={...n("IRWI").a,initialScrollHeadroom:Object(lt.a)(0),scrollHeadroom:Object(lt.a)(0),pinToTopWhenAtTop:!0},ht=n("TEoO"),pt=n("IG4P"),ut=n("FIs5"),mt=n("0yYu"),bt=n("cm6r"),gt=n("6OUF"),vt=n("95Se");const ft=e=>e,_t=A.a.b9dae4f4,yt=A.a.e7fb2027,Et=A.a.a66ac766,Ct=A.a.fe61929d,It=A.a.b08821f3,St=A.a.b92a21d8,xt=A.a.fa6d1a5c,wt=A.a.f08940ab,Ot=A.a.gaae1fd5;class Mt extends s.Component{constructor(...e){super(...e),r()(this,"state",{debouncedQuery:"",query:""}),r()(this,"_setInputRef",(e=>{this._textInputRef=e})),r()(this,"_renderEmptyDMSearchInbox",(()=>{const{debouncedQuery:e,query:t}=this.state;return e&&t?s.createElement(ut.a,{buttonLink:"/messages/compose",buttonText:wt,header:St({query:e}),message:xt({query:e})}):s.createElement(ut.a,{message:Ot})})),r()(this,"_renderRecentSearches",(()=>{const{recentSearches:e}=this.props,{debouncedQuery:t}=this.state;return e.length&&!t?s.createElement(s.Fragment,null,s.createElement(mt.a,{withBottomBorder:!1,withTopBorder:!1}),s.createElement(et,{clearRecentSearches:this._clearRecentSearches}),e.map((e=>s.createElement(it,{clearRecentSearch:t=>this._handleClearRecentSearch(t,e),handleRecentSearchClick:()=>this._handleRecentSearchClick(e),key:e,recentSearch:e})))):this._renderEmptyDMSearchInbox()})),r()(this,"_renderSearchResults",(()=>{const{accessibilityTitle:e,searchConversationIds:t,searchFetchStatus:n,renderInboxItem:a}=this.props;return s.createElement(c.a,null,s.createElement(pt.a,{isRefreshing:"loading"===n,onRefresh:this._handleRefetchSearch},s.createElement(ht.a,{accessibilityRole:"tablist",accessibilityTitle:e,anchoring:dt,assumedItemHeight:100,cacheKey:"dmSearchInbox",footer:this._renderFooter(),identityFunction:ft,items:t,noItemsRenderer:this._renderRecentSearches,onScrollEnd:this._handleScrollEnd,renderer:a(this.state.debouncedQuery)})))})),r()(this,"_renderFooter",(()=>s.createElement(ce.a,{style:Tt.footerContainer},s.createElement(I.c,{align:"center",size:"normal",weight:"bold"},yt),s.createElement(bt.a,{interactiveStyles:null},s.createElement(I.c,{align:"center",color:"primary",onPress:this._handleFooterClick,size:"small",withInteractiveStyling:!0},_t))))),r()(this,"_clearRecentSearches",(()=>{const{clearRecentSearches:e}=this.props;e()})),r()(this,"_handleFooterClick",(()=>{this._textInputRef&&this._textInputRef.focus()})),r()(this,"_handleRefetchSearch",(()=>{const{search:e}=this.props,{debouncedQuery:t}=this.state;e&&t&&e({query:t.toLowerCase()})})),r()(this,"_handleSearchChangeInner",(e=>{const{clearCurrentSearch:t,search:n}=this.props;this.setState({debouncedQuery:e.toLowerCase(),query:e}),e?n({query:e}):t()})),r()(this,"_handleSearchChangeDebounced",Object($e.a)(this._handleSearchChangeInner,200)),r()(this,"_handleSearchChange",(({currentTarget:{value:e}})=>{this.setState({query:e}),this._handleSearchChangeDebounced(e)})),r()(this,"_handleScrollEnd",(()=>{const{addRecentSearch:e}=this.props,{debouncedQuery:t,query:n}=this.state;t&&n&&e(n)})),r()(this,"_handleSearchClear",(()=>this._handleSearchChangeInner(""))),r()(this,"_handleHideRecentSearches",(()=>{const{clearCurrentSearch:e,hideRecentSearches:t}=this.props;e(),t()})),r()(this,"_handleAddRecentSearch",(({currentTarget:{value:e}})=>{const{addRecentSearch:t}=this.props;e&&(t(e),this._textInputRef&&this._textInputRef.blur())})),r()(this,"_handleRecentSearchClick",(e=>{this.setState({query:e}),this._handleSearchChangeInner(e)})),r()(this,"_handleClearRecentSearch",((e,t)=>{const{clearRecentSearch:n}=this.props;e.stopPropagation(),e.preventDefault(),n(t)}))}componentDidMount(){this._textInputRef&&this._textInputRef.focus()}render(){const{searchFetchStatus:e}=this.props,{query:t}=this.state;return s.createElement(s.Fragment,null,s.createElement(ce.a,{style:Tt.searchInput},s.createElement(ue.a,{accessibilityLabel:It,icon:s.createElement(vt.a,null),onPress:this._handleHideRecentSearches,pullLeft:!0,type:"text"}),s.createElement(gt.a,{Icon:nt.a,onChange:this._handleSearchChange,onClear:this._handleSearchClear,onSubmitEditing:this._handleAddRecentSearch,placeholder:Ct,ref:this._setInputRef,value:t,withClearButton:!0})),s.createElement(ct.a,{accessibilityLabel:Et,fetchStatus:t?e:"loaded",onRequestRetry:this._handleRefetchSearch,render:this._renderSearchResults}))}}r()(Mt,"defaultProps",{recentSearches:[],searchConversationIds:[]});const Tt=ye.a.create((e=>({searchInput:{backgroundColor:e.colors.cellBackground,borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:"1px",padding:e.spaces.space12,flexDirection:"row",alignItems:"center",zIndex:1},footerContainer:{marginVertical:e.spaces.space32}})));var kt=Ke(Mt),Rt=n("dwig"),Dt=n("QB0K"),Nt=n("Avzu"),At=n("FRNI");const Pt=A.a.dabdea6b,Lt=A.a.f325afc3;class Bt extends s.PureComponent{render(){return s.createElement(Dt.a,{accessibilityLabel:Pt,href:"/messages/compose",icon:s.createElement(Nt.a,null),label:Pt,scribeComponent:"floating_dm_button",shortLabel:Lt,testID:At.a.message})}}var Ft=Bt,Ut=n("tI3i"),jt=n.n(Ut),Ht=n("883S"),Gt=n("yoO3"),Vt=n("GSsg"),zt=n("2g+p"),Wt=n("mw9i"),qt=n("+d3d");const Kt=e=>e,$t=A.a.a66ac766,Qt=A.a.fe61929d;class Xt extends s.Component{constructor(e,t){super(e,t),r()(this,"state",{filterQuery:"",showRecentSearches:!1}),r()(this,"_render",(()=>{const{accessibilityTitle:e,conversationIds:t,footer:n,isRefreshing:a,renderEmptyDMInbox:r,renderStickyContent:o,virtualScrollerCacheKey:i}=this.props,{showRecentSearches:l}=this.state,d=this._isServerSearchEnabled&&l;return s.createElement(s.Fragment,null,o?o():null,d?s.createElement(kt,{accessibilityTitle:e,conversationIds:t,hideRecentSearches:this._hideRecentSearches,renderInboxItem:this._renderInboxItem}):this._enableSearchInbox?s.createElement(ce.a,{style:Yt.searchInput},s.createElement(gt.a,{Icon:nt.a,onChange:this._handleSearchChange,onClear:this._handleSearchClear,onFocus:this._handleSearchFocus,placeholder:Qt,withClearButton:!0})):null,d?null:s.createElement(c.a,null,s.createElement(pt.a,{isRefreshing:a,onRefresh:this._handlePullToRefresh},i&&t?s.createElement(ht.a,{accessibilityRole:"tablist",accessibilityTitle:e,anchoring:dt,assumedItemHeight:100,cacheKey:i,footer:n,identityFunction:Kt,items:t,noItemsRenderer:r,onNearEnd:this._handleNearEnd,renderer:this._renderInboxItem(this.state.filterQuery)}):null)))})),r()(this,"_handleNearEnd",(()=>{const{filterQuery:e}=this.state;e||this._handleHistoryRequest()})),r()(this,"_handleSearchChangeInner",(e=>{const{analytics:t}=this.props;this.setState({filterQuery:e.toLowerCase()}),t.scribe({element:"thread",action:"search",data:{event_value:this.state.filterQuery.length}})})),r()(this,"_handleSearchChangeDebounced",Object($e.a)(this._handleSearchChangeInner,200)),r()(this,"_handleSearchChange",(({currentTarget:{value:e}})=>this._handleSearchChangeDebounced(e))),r()(this,"_handleSearchClear",(()=>this._handleSearchChangeInner(""))),r()(this,"_handleSearchFocus",(()=>{this.props.conversationIds&&this.props.conversationIds.length<30&&this._handleHistoryRequest(),this.setState({showRecentSearches:!0})})),r()(this,"_hideRecentSearches",(()=>{this.setState({showRecentSearches:!1})})),r()(this,"_renderInboxItem",(e=>t=>{const{loggedInUserId:n}=this.context,{isSecondaryInbox:a,isTertiaryInbox:r}=this.props,i=this._filterConversation(e),c=`/messages/${t}`;return jt()(!!n,"loggedInUserId must be defined"),s.createElement(o.a,{exact:!1,path:c},(e=>s.createElement(je,{conversationId:t,currentQuery:this.state.filterQuery,filter:i,isActive:e,isSecondaryInbox:!!a,isTertiaryInbox:!!r,key:t,link:c,onClick:this._handleConversationClick,perspective:n})))})),r()(this,"_filterConversation",(e=>e=>{const{filterQuery:t}=this.state;if(!t)return!0;const{loggedInUserId:n}=this.context,a=Object.keys(e.participants),r="GROUP_DM"===e.type&&e.name&&e.name.toLowerCase().indexOf(t)>-1,s=a.some((r=>{const s=e.participants[r],o=n===r,i=1===a.length&&o,c=s&&s.user&&!o;return!(!i&&!c)&&this._userMatchesQuery(s.user.screen_name,s.user.name,t)}));return!(!r&&!s)})),r()(this,"_handleFetchInitialWrapper",(()=>{this._handleFetchInitial()})),r()(this,"_handleFetchInitial",(()=>{const{createLocalApiErrorHandler:e,fetchInboxIfNeeded:t,fetchUpdates:n}=this.props;return t().then(this._updateLastSeenEventId,e()).then((()=>{this._updatePolling.start()})).then((()=>n().catch(e())))})),r()(this,"_handleConversationClick",((e,t,n,a)=>{const{customCellClick:r,analytics:s}=this.props,o=null!=a&&a.participants?Object.keys(a.participants).length:0;s.scribe({element:n?"muted_conversation":"thread",action:"click",data:{event_value:this.state.filterQuery.length,conversation_id:t,conversation_participant_count:o,conversation_type:null==a?void 0:a.type}}),r&&r(e,t)})),r()(this,"_handleEmptyDMInboxImpression",(()=>{const{analytics:e}=this.props;e.scribe({component:"empty_message",action:"impression"})})),r()(this,"_handlePullToRefresh",(()=>{const{createLocalApiErrorHandler:e,fetchInbox:t}=this.props;t().then(this._updateLastSeenEventId,e())})),r()(this,"_updateLastSeenEventIdIfActive",(()=>{if("background"!==zt.a.currentState)return this._updateLastSeenEventId()})),r()(this,"_updateLastSeenEventId",(()=>{const{createLocalApiErrorHandler:e,updateLastSeenEventId:t}=this.props;return t().catch(e())})),this._fab=s.createElement(Ft,null),this._enableSearchInbox=!!e.withDmSearch&&this.context.featureSwitches.isTrue("responsive_web_search_dms_enabled"),this._isServerSearchEnabled=this._enableSearchInbox&&this.context.featureSwitches.isTrue("responsive_web_dm_server_side_search")}componentDidMount(){const{createLocalApiErrorHandler:e,fetchInboxHistory:t,fetchUpdates:n}=this.props;return this._updatePolling=new Vt.a((()=>{n().then(this._updateLastSeenEventIdIfActive,e(Ht.a))}),{interval:8e3}),this._handleHistoryRequest=Object(qt.a)(((...n)=>{t(...n).catch(e())}),1e3),this._handleFetchInitial()}componentWillUnmount(){this._updatePolling.stop()}render(){const e=this._isServerSearchEnabled&&this.state.showRecentSearches,t=[Yt.root,e&&Yt.searchList];return s.createElement(Gt.a,null,s.createElement(Rt.a,{component:Wt.a,fab:this._fab,style:t},s.createElement(ct.a,{accessibilityLabel:$t,fetchStatus:this.props.fetchStatus,onRequestRetry:this._handleFetchInitialWrapper,render:this._render})))}_userMatchesQuery(e,t,n){return e&&e.toLowerCase().indexOf(n)>-1||t&&t.toLowerCase().indexOf(n)>-1}}r()(Xt,"contextType",i.a),r()(Xt,"defaultProps",{conversationIds:[],isSecondaryInbox:!1,isTertiaryInbox:!1,withDmSearch:!1});const Yt=ye.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,flexGrow:1},searchList:{backgroundColor:e.colors.gray0},searchInput:{backgroundColor:e.colors.cellBackground,borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:"1px",padding:e.spaces.space12,zIndex:1}})));t.a=Xt},uHIe:function(e,t,n){"use strict";n.r(t),n.d(t,"DMMediaScreen",(function(){return _}));n("MvUL");var a=n("ERkP"),r=n("oEGd"),s=n("hqKg"),o=n("zh9S"),i=n("H9MA"),c=n("uKEd");const l=(e,t)=>t.match.params.entryId,d=Object(s.createSelector)(l,((e,t)=>Object(c.n)(e,l(0,t))),((e,t)=>t.match.params.conversationId),i.c,((e,t,n,a)=>{const r=t&&t.message_data.attachment||{};return{conversationId:n,mediaItem:r.photo||r.animated_gif||r.video,messageId:e,dataSaver:a}})),h={scribeAction:o.c};var p=Object(r.g)(d,h),u=n("7JQg"),m=n("2doW"),b=n("UPvq"),g=n("wiP2"),v=n("lklz"),f=n("RCZO");const _=e=>{const{dataSaver:t,mediaItem:n,messageId:r,history:s,conversationId:o}=e,i=Object(f.c)(n),{hideButtons:c,handleMediaDetailZoomed:l,handleMediaItemTapped:d}=Object(f.h)(),h=()=>{const e=o?`/messages/${o}`:"/messages";s.goBack({backLocation:e})};return a.useEffect((()=>{n||s.replace(o?`/messages/${o}`:"/messages")}),[s,o,n]),n?a.createElement(g.a.Configure,{headerless:!0},a.createElement(b.a,{backgroundColor:i,hideButtons:c,mediaItem:n,onCloseButtonPress:h},a.createElement(m.a,{dataSaver:t,mediaItems:[n],onDismiss:h,onMediaDetailZoomed:l,onTap:d,videoId:v.b.forDm(r)}))):null};t.default=Object(u.c)({page:"messages",section:"media"})(p(_))},wO1l:function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return b}));n("kYxP");var a=n("aWyx"),r=n("4q8G"),s=n("lL5k"),o=n.n(s),i=n("XnpN"),c=n("w6IS"),l=n("s1N3"),d=n("VIKJ"),h=n("vy4g"),p=n("GZwR");function u(e){return Object(l.a)(e,(({type:e,id:t})=>e===p.b.DMConversation?`c_${t}`:`u_${t}`))}const m=(e,t,n,a=!1)=>{const s=e&&new RegExp(`(^|.*\\s)${o()(e)}.*`,"i");return u(((e,t)=>Object(c.a)(e.map((e=>Object(i.a)(e,t).map((e=>e.user))))))(t.sort(r.a),n).filter((e=>(!s||(s.test(e.screen_name)||s.test(e.name)))&&(e.followed_by||a))).map((e=>(e=>{const{id_str:t}=e,{tokens:n,rounded_score:a,src:r,...s}=Object(h.a)(Object(h.b)(e),p.c.DMInjected);return{data:{...s,can_dm:!0},rounded_score:a,tokens:n,src:r,id:t,type:p.b.User}})(e))))};function b(e,t,n){const s=e&&new RegExp(`(^|.*\\s)${o()(e)}.*`,"i"),l=t.filter((e=>e.trusted)).filter((t=>{if(!e)return!0;const a=s&&t.name&&s.test(t.name),r=Object(i.a)(t,n).map((e=>e.user)),o=s&&r.some((e=>s.test(e.screen_name)||s.test(e.name)));return a||o})).sort(r.a);let h=l;if(e){const[e,t]=Object(d.a)(l,(e=>e.type===a.a.ONE_TO_ONE));h=e.concat(t)}return u(Object(c.a)(h.map((t=>{const r=t.type===a.a.GROUP;let s=[];return r&&s.push((e=>({data:{name:e.name||"",conversationId:e.conversation_id},id:e.conversation_id,type:p.b.DMConversation}))(t)),!e&&r||(s=s.concat(m(r?e:null,[t],n,!r))),s}))))}},yV8l:function(e,t,n){"use strict";n.r(t),n.d(t,"ConversationInfoScreen",(function(){return xe})),n.d(t,"styles",(function(){return we}));var a=n("KEM+"),r=n.n(a),s=n("ERkP"),o=n("v6aA"),i=n("EbOo"),c=n("EPsT"),l=n("MMRb"),d=n("RqPI"),h=n("1YZw"),p=n("oEGd"),u=n("0KEI"),m=n("hqKg"),b=n("p9G8"),g=n("X/yg"),v=n("AQOc"),f=n("zh9S"),_=n("G6rE");const y=(e,t)=>t.match.params.conversationId,E=(e,t)=>{const n=y(0,t);return l.selectInboxTypeByConversation(e,n)},C=Object(m.createSelector)(((e,t)=>l.selectConversation(e,y(0,t))),l.selectEntries,y,((e,t)=>l.selectConversationFetchStatus(e,y(0,t))),d.f,d.h,_.e.selectAll,((e,t)=>{const n=E(e,t);return Object(g.d)(n)}),E,((e,t,n,a,r,s,o,i,c)=>{const l=e&&e.data,d=l&&Object(v.b)(l,t,o),h=d&&Object(b.a)(d,s),p=!(!l||!l.notifications_disabled),u=!(!l||!l.mention_notifications_disabled),m=l&&l.mute_expiration_time&&Number(l.mute_expiration_time),g=d?Object.keys(d.participants):[],f=g&&1===g.length&&g[0]===s,_=g&&g.filter((e=>e!==s)),y=f?g:_.slice(0,5),E=y.length<_.length;if(!s)throw new Error("logged-in user not found");return{conversation:d,conversationId:n,fetchStatus:a,groupName:h,inboxType:c,mentionNotificationsDisabled:u,language:r,muteExpirationTime:m,notificationsDisabled:p,perspective:s,scribeComponent:i,showViewPeople:E,visibleParticipants:y,isSelfConversation:f}})),I={addToast:h.b,block:_.e.block,createLocalApiErrorHandler:Object(u.d)("DIRECT_MESSAGES_CONVERSATION_INFO"),disableMentionNotifications:l.disableMentionNotifications,disableNotifications:l.disableNotifications,enableMentionNotifications:l.enableMentionNotifications,enableNotifications:l.enableNotifications,fetchConversationIfNeeded:l.fetchConversationIfNeeded,leaveConversation:l.leaveConversation,muteDMUser:l.muteDMUser,scribeAction:f.c,unblock:_.e.unblock,unmuteDMUser:l.unmuteDMUser,updateConversationName:l.updateConversationName};var S=Object(p.g)(C,I),x=n("7JQg"),w=n("aWyx"),O=n("I2k/"),M=n("aA19"),T=n("v//M"),k=n("Gpeq"),R=n("XnpN"),D=n("3XMw"),N=n.n(D),A=n("tuLS"),P=n("M2mT"),L=n("u0B7"),B=n("Re5t"),F=n("hqDb"),U=n("MWbm"),j=n("mjJ+"),H=n("mw9i"),G=n("5mJL"),V=n("t62R"),z=n("0yYu"),W=n("6vad"),q=n("jtO7"),K=n("CK8+"),$=n("rHpw"),Q=n("mN6z"),X=n("fs1G");const Y=N.a.e3e58b6d,J=N.a.a9ddbb94,Z=N.a.abd845fd,ee=N.a.g2fd3205,te=N.a.eb1bb5a1,ne=N.a.c6026009,ae=N.a.eb75875d,re=N.a.a7f20222,se=N.a.g2f04a6a,oe=N.a.i453fedf,ie=N.a.b3dfd519,ce=N.a.cc7c8ce6,le=N.a.hab58673,de=N.a.e3c6e080,he={confirmButtonLabel:N.a.bb1d57b6,actionTextDelete:N.a.ad63377d,actionTextLeave:N.a.g9074da4,header:N.a.gdf4b79f,text:N.a.h09b49f7},pe=N.a.e67b2d65,ue=N.a.f05597b2,me=N.a.i6b19b07,be=N.a.j7bb1a42,ge=N.a.fcd4d489,ve=N.a.a30e1677,fe=N.a.a9fd20be,_e=N.a.e133be4e,ye=N.a.c9623eeb,Ee=N.a.cceeaf2b,Ce=N.a.d87bff5a,Ie=[{duration:1,displayText:N.a.j37c4674,toast:N.a.je7e1fec,toastOld:N.a.hf94a2d5},{duration:2,displayText:N.a.fb7a43c5,toast:N.a.e95c8f8a,toastOld:N.a.bd54fad1},{duration:3,displayText:N.a.cb5bf56e,toast:N.a.gb7a130b,toastOld:N.a.f6fce0fd},{duration:0,displayText:N.a.cabeb6c1,toast:N.a.i78153dd,toastOld:N.a.hfc86556}],Se={page:"messages",section:"conversation_settings"};class xe extends s.Component{constructor(e){super(e),r()(this,"_getNameOfGroupOrOneToOneConvo",(()=>{const{groupName:e,conversation:t}=this.props;return(null==t?void 0:t.type)===w.a.GROUP?e||"":this._getNameOfOneToOneConvo()})),r()(this,"_getScreenNameOfOneToOneConvo",(()=>{const e=this._getSenderOfOneToOneConvo();return e?e.screen_name:""})),r()(this,"_getNameOfOneToOneConvo",(()=>{const e=this._getSenderOfOneToOneConvo();return e?e.name:""})),r()(this,"_getBlockedOfOneToOneConvo",(()=>{const e=this._getSenderOfOneToOneConvo();return e?e.blocking:null})),r()(this,"_getSenderOfOneToOneConvo",(()=>{const{conversation:e,perspective:t}=this.props,n=e&&Object(R.a)(e,t).map((({user:e})=>e));return n&&n[0]||null})),r()(this,"_renderContent",(()=>{const{conversation:e}=this.props,t=!(null!=e&&e.trusted);return s.createElement(o.a.Consumer,null,(({featureSwitches:e})=>{const n=e.isTrue("dm_conversations_muting_enabled");return s.createElement(U.a,null,this._renderGroupSection(),this._renderParticipantsSection(),t?null:this._renderNotificationsSection(),this._renderConversationActions(n))}))})),r()(this,"_getItems",(()=>Ie.map((e=>({text:e.displayText,onClick:()=>this._handleNotificationsDisabled(e)}))))),r()(this,"_renderActionMenu",(()=>e=>s.createElement(j.a,{items:this._getItems(),onCloseRequested:e}))),r()(this,"_handleViewPeople",(()=>{this._scribeAction("view_participants")})),r()(this,"_handleMuteDMUser",(()=>{const{conversationId:e,createLocalApiErrorHandler:t,muteDMUser:n}=this.props,a=this._getSenderOfOneToOneConvo();a&&(n(a.id_str,e).catch(t()),this._scribeAction("mute_user"))})),r()(this,"_handleUnmuteDMUser",(()=>{const{conversationId:e,createLocalApiErrorHandler:t,unmuteDMUser:n}=this.props,a=this._getSenderOfOneToOneConvo();a&&(n(a.id_str,e).catch(t()),this._scribeAction("unmute_user"))})),r()(this,"_handleBlockUser",(()=>{const{addToast:e,block:t,createLocalApiErrorHandler:n}=this.props,a=this._getSenderOfOneToOneConvo(),r=a?a.id_str:"";""!==r&&(t(r).then((()=>{e({action:{label:_e,onAction:this._handleUnblockUser},text:fe})}),n(i.a)),this._scribeAction("block"))})),r()(this,"_handleUnblockUser",(()=>{const e=this._getSenderOfOneToOneConvo(),t=e?e.id_str:"",{createLocalApiErrorHandler:n,unblock:a}=this.props;a(t).catch(n(L.a)),this._scribeAction("unblock")})),r()(this,"_handleReportConversation",(()=>{this._scribeAction("report")})),r()(this,"_handleFetch",(()=>{const{createLocalApiErrorHandler:e,conversationId:t,fetchConversationIfNeeded:n}=this.props;n({conversationId:t}).catch(e(Object(O.a)(t)))})),r()(this,"_handleLeaveConversation",(()=>{const{conversation:e,conversationId:t,createLocalApiErrorHandler:n,leaveConversation:a}=this.props;a({conversationId:t}).catch(n({showToast:!0}));const r=(null==e?void 0:e.type)===w.a.GROUP?"leave_group":"delete_thread";this._scribeAction(r),this._handleConversationClose()})),r()(this,"_handleNotificationsDisabled",(e=>{const{addToast:t,conversationId:n,disableNotifications:a}=this.props,r=this._getNameOfGroupOrOneToOneConvo();a({conversationId:n,duration:e.duration}),t({text:e.toast({name:r})})})),r()(this,"_handleNotificationsEnabled",(()=>()=>{const{addToast:e,conversationId:t,createLocalApiErrorHandler:n,enableNotifications:a}=this.props,r=this._getNameOfGroupOrOneToOneConvo(),s=se({name:r});a({conversationId:t}).then((()=>{e({text:s})}),n({showToast:!0}))})),r()(this,"_handleMentionSwitchChanged",(e=>{const{addToast:t,conversationId:n,createLocalApiErrorHandler:a,disableMentionNotifications:r,enableMentionNotifications:s,scribeAction:o,scribeNamespace:i}=this.props;o({...i,component:"dm_existing_conversation_dialog",action:e?"disable_mentions":"enable_mentions"}),e?r({conversationId:n}).then((()=>{t({text:le})}),a({showToast:!0})):s({conversationId:n}).then((()=>{t({text:de})}),a({showToast:!0}))})),r()(this,"_handleConversationClose",(()=>{this._returnToInbox()})),r()(this,"_returnToInbox",(()=>{const{history:e,inboxType:t}=this.props;e.push(Object(g.b)(t))})),r()(this,"_scribeAction",(e=>{const{scribeAction:t,scribeComponent:n,scribeNamespace:a}=this.props;t({...a,component:n,action:e},this._getScribeData())})),r()(this,"_getScribeData",(()=>{const{conversation:e}=this.props;return{items:[{conversation_type:(null==e?void 0:e.type)===w.a.GROUP?1:0}]}})),this.state={notificationsDisabled:e.notificationsDisabled,muteExpirationTime:e.muteExpirationTime}}componentDidMount(){this._handleFetch()}shouldComponentUpdate(e,t){return!Object(Q.a)(e,this.props)||!Object(Q.a)(t,this.state)}render(){const{conversation:e,fetchStatus:t,conversationId:n}=this.props,a=(null==e?void 0:e.type)===w.a.GROUP;return s.createElement(P.a,{backLocation:`/messages/${n}`,screenType:"secondaryDetail",title:a?J:Y,withBottomTabBar:!1},s.createElement(H.a,{style:we.root},s.createElement(T.a,{accessibilityLabel:Ce,fetchStatus:t,onRequestRetry:this._handleFetch,render:this._renderContent})))}_renderGroupSection(){const{conversation:e,conversationId:t,groupName:n,perspective:a}=this.props,r=(null==e?void 0:e.type)===w.a.GROUP,o=null==e?void 0:e.trusted;return r?s.createElement(G.a,{avatarCell:s.createElement(M.a,{conversation:e,perspective:a}),cellStyle:we.groupSectionRight,style:we.groupSection},s.createElement(V.c,{numberOfLines:1,weight:"bold"},n),o?s.createElement(V.c,{link:`/messages/${t}/group-info`,style:we.edit},Z):null):null}_renderParticipantsSection(){const{conversation:e,conversationId:t,showViewPeople:n,visibleParticipants:a}=this.props,r=(null==e?void 0:e.type)===w.a.GROUP,o=null==e?void 0:e.trusted;return s.createElement(U.a,null,r?s.createElement(s.Fragment,null,s.createElement(z.a,null),s.createElement(W.b,{text:ee})):null,s.createElement(F.a,{displayMode:B.a.UserCompact,userIds:a,withFinalItemBorder:r,withItemBorder:!0}),n?s.createElement(q.a,{color:"primary",label:te,link:`/messages/${t}/participants`,onClick:this._handleViewPeople,withBottomBorder:!0}):null,r&&o?s.createElement(q.a,{color:"primary",label:ne,link:`/messages/${t}/add`}):null)}_renderSnoozeConversationSwitch(){const{muteExpirationTime:e,notificationsDisabled:t}=this.props,n=this._getNameOfGroupOrOneToOneConvo(),a=re({name:n});return t?s.createElement(U.a,{accessibilityRole:"label"},s.createElement(U.a,{style:we.notificationsToggleContainer},s.createElement(V.c,{color:"normal"},a),s.createElement(K.a,{onValueChange:this._handleNotificationsEnabled(),value:t})),e?s.createElement(V.c,{color:"gray600",size:"small",style:we.notificationsDescription},this._displayExpirationTime()):null):s.createElement(U.a,{style:we.notificationsToggleContainer},s.createElement(V.c,{color:"normal"},a),s.createElement(A.a,{accessibilityLabel:a,renderMenu:this._renderActionMenu()},s.createElement(K.a,{onValueChange:X.a,value:t})))}_renderSnoozeMentionsSwitch(){const{mentionNotificationsDisabled:e}=this.props;return s.createElement(U.a,null,s.createElement(U.a,{accessibilityRole:"label",style:we.notificationsToggleContainer},s.createElement(V.c,{color:"normal"},ie),s.createElement(K.a,{onValueChange:this._handleMentionSwitchChanged,value:e})),s.createElement(V.c,{color:"gray600",size:"small",style:we.notificationsDescription},ce))}_renderNotificationsSection(){const{conversation:e,isSelfConversation:t}=this.props,n=(null==e?void 0:e.type)===w.a.GROUP;return t?null:s.createElement(U.a,null,s.createElement(z.a,null),s.createElement(W.b,{text:ae}),s.createElement(U.a,{style:n&&we.settingGroup},this._renderSnoozeConversationSwitch()),n?this._renderSnoozeMentionsSwitch():null)}_displayExpirationTime(){const{language:e,muteExpirationTime:t}=this.props;if(!t)return null;const n=t-(new Date).getTime()<864e5,a=new Date(t).toLocaleString(Object(k.a)(e||"en"),n?{hour:"2-digit",minute:"2-digit"}:{weekday:"long",month:"short",day:"2-digit"});return oe({expiration:a})}_renderConversationActions(e){const{conversation:t}=this.props,n=(null==t?void 0:t.type)!==w.a.GROUP,a=!(null!=t&&t.trusted);return s.createElement(U.a,null,s.createElement(z.a,null),n&&e&&a?this._renderMuteButton():null,n?this._renderBlockUserButton():null,this._renderReportConversationButton(),s.createElement(c.a,{confirmationSheetConfirmButtonLabel:he.confirmButtonLabel,confirmationSheetConfirmButtonType:"destructive",confirmationSheetHeadline:he.header,confirmationSheetText:he.text,label:a?he.actionTextDelete:he.actionTextLeave,onConfirmationSheetConfirm:this._handleLeaveConversation,withBottomBorder:!1}))}_renderMuteButton(){const{conversation:e}=this.props,t=this._getScreenNameOfOneToOneConvo();return e?e.muted?s.createElement(q.a,{color:"primary",label:ue({screenName:t}),onPress:this._handleUnmuteDMUser}):s.createElement(q.a,{color:"primary",label:pe({screenName:t}),onPress:this._handleMuteDMUser}):null}_renderBlockUserButton(){const{isSelfConversation:e}=this.props,t=this._getScreenNameOfOneToOneConvo(),n=this._getBlockedOfOneToOneConvo(),a=n?Ee({screenName:t}):ve({screenName:t}),r=n?ye({screenName:t}):ge({screenName:t});return e?null:s.createElement(c.a,{color:"primary",confirmationSheetText:a,label:r,onConfirmationSheetConfirm:n?this._handleUnblockUser:this._handleBlockUser})}_renderReportConversationButton(){const{conversation:e,conversationId:t,inboxType:n,isSelfConversation:a}=this.props,r=(null==e?void 0:e.type)!==w.a.GROUP?be({screenName:this._getScreenNameOfOneToOneConvo()}):me,o={pathname:`/i/report/dm_conversation/${t}`,state:{clientReferer:window.location.pathname,scribeNamespace:Se,inboxType:n}};return a?null:s.createElement(q.a,{color:"primary",label:r,link:o,onPress:this._handleReportConversation})}}const we=$.a.create((e=>({root:{backgroundColor:e.colors.cellBackground},edit:{flexShrink:0},groupSection:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},groupSectionRight:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},notificationsToggleContainer:{alignItems:"center",flexDirection:"row",flexGrow:1,justifyContent:"space-between",paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},notificationsDescription:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingBottom:e.componentDimensions.gutterVertical,paddingTop:0},settingGroup:{borderBottomColor:e.colors.borderColor,borderBottomWidth:1,borderBottomStyle:"solid"}})));t.default=Object(x.c)(Se)(S(xe))}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/bundle.DirectMessages.fdb3d835.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{"1JIQ":function(e,t,o){"use strict";o.r(t),o.d(t,"DMRichTextComposeContextProvider",(function(){return p}));var n=o("97Jx"),i=o.n(n),a=o("ERkP"),r=o("cOtO"),s=o("RH6X"),c=o("hHEM"),l=o("keCP");const p=e=>{const t={convertEmojiToEntities:c.a.convertEmojiToEntities,element:l.a,initEditorState:c.a.initEditorState,insertTextAtCursor:c.a.insertTextAtCursor};return a.createElement(r.default,i()({},e,{richTextInputContext:t,typeaheadWrapper:s.a}))};t.default=p},M2mT:function(e,t,o){"use strict";var n=o("KEM+"),i=o.n(n),a=o("+/5o"),r=o("ERkP"),s=o("HPNB"),c=o("VAZu"),l=o("wiP2"),p=o("Es6L"),h=o("rHpw");var d=h.a.create((e=>({fill:{flex:1,alignSelf:"stretch"},viewportView:{...h.a.absoluteFillObject,overflowY:"auto"},appBarContainer:{backfaceVisibility:"hidden",position:"sticky",top:0,zIndex:1}}))),u=o("MWbm"),m=o("yw4N"),v=o("TnY3"),C=o("cHvH"),w=o("3xLC");class y extends r.Component{render(){return r.createElement(C.a,null,(({windowWidth:e})=>s.a.isTwoColumnLayout(e)?this._renderForTwoColumnLayout():this._renderForOneColumnLayout()))}_renderForOneColumnLayout(){const{children:e,leftControl:t,screenType:o,showSubtitleOnWideDetail:n,withBottomBorder:i,withDetailOpen:a,...s}=this.props;return r.createElement(r.Fragment,null,Object(p.a)()?this._renderInlineNav({isTwoColumnLayout:!1}):r.createElement(l.a.Configure,s),e)}_renderForTwoColumnLayout(){return r.createElement(r.Fragment,null,this._renderInlineNav({isTwoColumnLayout:!0}),this._renderChildren())}_renderInlineNav({isTwoColumnLayout:e}){const{SideNavButton:t,TeamsSwitcher:o,TabBar:n,backLocation:i,documentTitle:s,headerless:p,history:h,leftControl:m,middleControl:v,onBackClick:C,rightControl:w,screenType:y,searchBoxOptions:b,secondaryBar:g,showSubtitleOnWideDetail:E,subtitle:O,title:f,titleIconCell:T,titleIconCellSize:x,withBottomBorder:I,withDetailOpen:B,withSearchBox:P,withTweetButton:k}=this.props,_="root"===y,D="secondaryRoot"===y,L="primaryDetail"===y,S=_||L&&e,N=_?a.j:L?a.f:void 0,V=r.createElement(u.a,{style:d.appBarContainer},r.createElement(c.a,{backLocation:i,fixed:!1,hideBackButton:S,history:h,leftControl:m,middleControl:v,onBackClick:C,rightControl:w,subtitle:L&&E?O:void 0,title:f,titleDomId:N,titleIconCell:T,titleIconCellSize:x,withBottomBorder:Boolean(!g||I)})),M=_||D&&B?null:r.createElement(l.a.Configure,{SideNavButton:t,TabBar:n,TeamsSwitcher:o,backLocation:i,documentTitle:s,headerless:p,middleControl:v,onBackClick:C,rightControl:w,searchBoxOptions:b,subtitle:O,title:f,withSearchBox:P,withTweetButton:k});return r.createElement(r.Fragment,null,M,V,g)}_renderChildren(){const{children:e}=this.props;return this.context.rootDetailPerColumnScroll?r.createElement(u.a,{style:d.fill},r.createElement(m.a,{style:d.viewportView},e)):e}}i()(y,"contextType",w.a),i()(y,"defaultProps",{screenType:"secondaryDetail",showSubtitleOnWideDetail:!0});t.a=Object(v.a)(y)},cOtO:function(e,t,o){"use strict";o.r(t),o.d(t,"DMConversationScreen",(function(){return re}));var n=o("KEM+"),i=o.n(n),a=(o("MvUL"),o("ERkP")),r=o("HPNB"),s=o("v6aA"),c=o("zh9S"),l=o("MMRb"),p=o("VnFT"),h=o("RqPI"),d=o("oEGd"),u=o("hqKg"),m=(o("Myq3"),o("AQOc")),v=o("z2Pn"),C=o("pNZL"),w=o("G6rE"),y=o("X/yg");const b=(e,t)=>t.match.params.conversationId,g=Object(u.createSelector)(((e,t)=>l.selectConversation(e,b(0,t))),l.selectEntries,b,y.h,h.h,y.i,y.j,w.e.selectAll,((e,t)=>p.j(e,b(0,t))),((e,t)=>p.i(e,b(0,t))),l.selectPoppedOutConversationId,l.selectDrawerVisibility,((e,t,o,n,i,a,r,s,c,l,p,h)=>{const d=e&&e.data;return{conversation:d&&Object(m.a)(d,t,s),conversationId:o,isNewGroupConversation:n,isUploading:c,media:l,newConversationParticipants:a,perspective:i,poppedOutConversationId:p,dmDrawerVisibility:h}})),E=e=>t=>p.c(e,t);var O=Object(d.d)(g,(e=>{return{cancelUpload:(t=e.match.params.conversationId,()=>p.b(t)),googleAnalyticsPageView:c.a,removeMedia:E(e.match.params.conversationId),scribePageImpression:c.d,setLastViewedDmInboxPath:v.h,updateTweetDetailNav:C.b,popOutConversation:l.popOutConversation,setDrawerVisibility:l.setDrawerVisibility};var t})),f=o("7JQg"),T=o("i4Oy"),x=(o("uB9N"),o("Oi4X")),I=o("aA19"),B=o("SrtL"),P=o("3XMw"),k=o.n(P),_=o("rHpw"),D=o("mw9i"),L=o("FIs5");const S=k.a.a2f8105f,N=k.a.fa91f351,V=k.a.b999caa8,M=k.a.de2c3337,j=_.a.create((e=>({root:{alignItems:"center",justifyContent:"center",flex:1,backgroundColor:e.colors.cellBackground}})));class R extends a.PureComponent{render(){const{onButtonPress:e}=this.props;return a.createElement(D.a,{style:j.root},a.createElement(B.a,{title:S}),a.createElement(L.a,{buttonText:M,header:N,message:V,onButtonPress:e}))}}var W=o("xPna"),A=o("XnpN"),F=o("Lsrn"),G=o("shC7"),H=o("k/Ka");const z=(e={})=>Object(H.a)("svg",{...e,style:[F.a.root,e.style,G.a.getConstants().isRTL&&F.a.iconRTL],viewBox:"0 0 24 24"},a.createElement("g",null,a.createElement("path",{d:"M19.687 22H7.813C6.538 22 5.5 20.962 5.5 19.687v-4.452c0-.414.336-.75.75-.75s.75.335.75.75v4.45c0 .45.365.815.813.815h11.873c.448 0 .813-.365.813-.813V7.813c0-.448-.365-.813-.813-.813h-4.452c-.414 0-.75-.336-.75-.75s.336-.75.75-.75h4.452C20.962 5.5 22 6.538 22 7.813v11.873C22 20.962 20.962 22 19.687 22z"}),a.createElement("path",{d:"M11.25 4.045c-.414 0-.75.336-.75.75V9.44L3.064 2.004c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06L9.438 10.5H4.804c-.414 0-.75.336-.75.75s.336.75.75.75h6.445c.414 0 .75-.336.75-.75V4.795c0-.414-.336-.75-.75-.75z"})));z.metadata={width:24,height:24};var J=z,q=o("/yvb"),Q=o("6s7X"),U=o("JGUy");const X=k.a.h810143c;var K=({accessibilityLabel:e,key:t,link:o,style:n})=>{const i=a.createElement(Q.a,null),r=Object(U.a)();return a.createElement(q.a,{accessibilityLabel:e||X,hoverLabel:{label:X},icon:i,key:t,link:o,pullRight:!0,style:n,type:r})},Y=o("7myi"),Z=o("M2mT"),$=o("aITJ"),ee=o("MWbm"),te=o("OhSZ");const oe=k.a.d4986f85,ne=k.a.e3e58b6d,ie=k.a.a9ddbb94,ae=a.createElement(J,null);class re extends a.PureComponent{constructor(e,t){super(e,t),i()(this,"_composer",a.createRef()),i()(this,"_handleConversationClose",(e=>{const{conversation:t,history:o}=this.props;null!=t&&t.trusted?o.push("/messages"):e()})),i()(this,"_handlePopOutConvo",(()=>{const{conversationId:e,popOutConversation:t}=this.props;t(e)})),i()(this,"_handlePopInConvoFromScreen",(()=>{const{setDrawerVisibility:e}=this.props;e(W.a.CLOSED)})),i()(this,"_handleInfoClick",(()=>{const{history:e,conversationId:t}=this.props;t&&e.push(`/messages/${t}/info`)})),i()(this,"_updateLastViewDmInboxPath",(()=>{const{setLastViewedDmInboxPath:e,location:t}=this.props;e(t.pathname)}));const{conversationId:o,history:n,location:r,isNewGroupConversation:s}=e;o||s||r.pathname!==window.location.pathname||n.replace({pathname:"/messages"}),this._showDMQuickAccessWithClose=this.context.featureSwitches.isTrue("responsive_web_dm_quick_access_with_close_enabled")}componentDidMount(){const{googleAnalyticsPageView:e,scribeNamespace:t,scribePageImpression:o,updateTweetDetailNav:n}=this.props;o(t),n(t),e(t),this._updateLastViewDmInboxPath()}componentDidUpdate(e){const{conversationId:t}=this.props;t!==e.conversationId&&this._updateLastViewDmInboxPath()}render(){const{conversationId:e,dmDrawerVisibility:t,history:o,location:n,poppedOutConversationId:i,richTextInputContext:r,typeaheadWrapper:s}=this.props,c="string"==typeof n.query.text?n.query.text:void 0,l=T.a.get("window").width>=_.a.theme.breakpoints.small,p=this._showDMQuickAccessWithClose&&e===i&&t!==W.a.CLOSED;return a.createElement(Z.a,this._getNavProps(),p?a.createElement(R,{onButtonPress:this._handlePopInConvoFromScreen}):a.createElement(x.a,{conversationId:e,history:o,isWide:l,location:n,prefillText:c,richTextInputContext:r,typeaheadWrapper:s}))}_getNavProps(){const{conversation:e,newConversationParticipants:t,perspective:o}=this.props,n=e&&Object.keys(e.participants).length?Object(te.a)({conversation:e,perspective:o}):t?Object(te.a)({newConversationParticipants:t,perspective:o}):oe,i=e&&Object.keys(e.participants).length?a.createElement(te.b,{conversation:e,perspective:o,titleWeight:"heavy",withScreenName:!1}):t?a.createElement(te.b,{newConversationParticipants:t,perspective:o,titleWeight:"heavy",withScreenName:!1}):oe,r="large",s=o?a.createElement(I.a,{conversation:e,perspective:o,size:r}):void 0,c=e&&e.type===l.CONVERSATION_TYPE.ONE_TO_ONE&&o&&Object(A.a)(e,o).map((({user:e})=>e.screen_name)),p=c?`@${c[0]}`:void 0;return{backLocation:"/messages",onBackClick:this._handleConversationClose,documentTitle:n,rightControl:this._renderRightControl(),title:i,titleIconCell:s,titleIconCellSize:r,subtitle:p,screenType:"primaryDetail",withBottomTabBar:!1,headerless:$.b.isKaiOS()}}_renderRightControl(){const{conversation:e,conversationId:t}=this.props,o=(null==e?void 0:e.type)===l.CONVERSATION_TYPE.GROUP;return t?a.createElement(ee.a,{style:se.rightControlStyles},r.a.isTwoColumnLayout(T.a.get("window").width)&&this._showDMQuickAccessWithClose&&a.createElement(q.a,{icon:ae,onPress:this._handlePopOutConvo,pullRight:!0,style:se.infoButton,type:"text"}),a.createElement(K,{accessibilityLabel:o?ie:ne,key:t,link:`/messages/${t}/info`,style:se.infoButton})):void 0}}i()(re,"contextType",s.a),i()(re,"defaultProps",{isNewGroupConversation:!1,typeaheadWrapper:Y.a});const se=_.a.create((e=>({root:{flexGrow:1},activity:{flexBasis:"1px",flexGrow:1,height:"100%"},kaiOSFix:{paddingBottom:20},dragDrop:{flexGrow:1},scrollView:{flexGrow:1},infoButton:{marginRight:e.spaces.space4},offsetBottom:{paddingBottom:_.a.iPhoneOffsetBottom},rightControlStyles:{flexDirection:"row"}})));t.default=Object(f.c)({page:"messages",section:"thread"})(O(re))}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/bundle.DMRichTextCompose.6c51bcd5.js.map